import{d as D,u as N,r as _,c as $,a as o,b as e,t as a,e as y,g as J,w as E,v as j,n as S,M as I,o as n,_ as O,F as U,f as Q,h as g,i as C,j as q,k as M,l as F,D as G,m as X,p as Y,q as L,s as T,P as Z,x as ee,y as te}from"./index-DWXsa7iI.js";import{_ as se}from"./Tutorial-C9Gk__cm.js";const le={class:""},ne={class:"mb-3"},oe={class:"d-flex text-start input mb-2"},ae={class:"info"},ie={key:0},re={key:1,class:"text-placeholder"},ue={class:"d-flex text-start input"},de={class:"info"},ce={class:"flex-grow-1 value text-dim"},pe={class:"d-flex mt-2"},me=D({__name:"Create",emits:["cancel","create"],setup(P,{emit:l}){const v=N(),c=l,m=_(""),r=_(""),i=$(()=>m.value!=""&&r.value!="");function u(f){f&&(m.value=f)}function h(){v.showModal(I.FOLDERSELECTION,{callback:u,mode:"create"})}return(f,b)=>(n(),o("div",le,[e("h3",ne,a(f.$t("main.home.create_title")),1),e("div",oe,[e("div",ae,a(f.$t("main.home.label.folder")),1),e("div",{class:"flex-grow-1 value text-dim",style:{cursor:"pointer"},onClick:h},[m.value!=""?(n(),o("span",ie,a(m.value),1)):(n(),o("span",re,a(f.$t("main.home.label.path_placeholder")),1))]),e("div",{id:"select-folder",class:"folder",style:{cursor:"pointer"},onClick:b[0]||(b[0]=k=>{h(),y(J)()})},b[4]||(b[4]=[e("i",{class:"bi bi-folder"},null,-1)]))]),e("div",ue,[e("div",de,a(f.$t("main.home.label.name")),1),e("div",ce,[E(e("input",{type:"text","onUpdate:modelValue":b[1]||(b[1]=k=>r.value=k),placeholder:"project_name",style:{width:"100%"}},null,512),[[j,r.value]])])]),e("div",pe,[b[5]||(b[5]=e("div",{class:"flex-grow-1"},null,-1)),e("div",{class:"btn-grey hover-grey",onClick:b[2]||(b[2]=k=>c("cancel"))},a(f.$t("main.home.label.cancel")),1),e("div",{id:"confirm-create",class:S(["ms-2",i.value?"btn-blue":"btn-grey text-dim"]),onClick:b[3]||(b[3]=k=>{c("create",{path:m.value,name:r.value}),y(J)()})},a(f.$t("main.home.label.create")),3)])]))}}),ve=O(me,[["__scopeId","data-v-9d2b8ee6"]]),he={class:"create-option d-flex"},ge={class:"flex-grow-1"},be={class:"create-title m-0"},fe={class:"create-explanation"},_e={class:"create-option d-flex"},ye={class:"flex-grow-1"},$e={class:"create-title m-0"},ke={class:"create-explanation"},we=D({__name:"Options",emits:["create","import"],setup(P,{emit:l}){const v=N(),c=l;function m(i){i&&c("import",i)}function r(){v.showModal(I.FOLDERSELECTION,{callback:m,mode:"import"})}return(i,u)=>(n(),o(U,null,[e("div",he,[e("div",ge,[e("h6",be,a(i.$t("main.home.projects.create")),1),e("span",fe,a(i.$t("main.home.projects.create_details")),1)]),e("div",{id:"create-project",class:"create-btn highlight",onClick:u[0]||(u[0]=h=>{c("create"),y(J)()})},a(i.$t("main.home.projects.create_button")),1)]),e("div",_e,[e("div",ye,[e("h6",$e,a(i.$t("main.home.projects.import")),1),e("span",ke,a(i.$t("main.home.projects.import_details")),1)]),e("div",{class:"create-btn",onClick:r},a(i.$t("main.home.projects.import_button")),1)])],64))}}),xe=O(we,[["__scopeId","data-v-45a6c858"]]),Ce="/assets/duck-S9Uqeb_r.svg",W="ArrowUpArrowUpArrowDownArrowDownArrowLeftArrowRightArrowLeftArrowRightba",Pe={__name:"Egg",setup(P){let l="",v=_(-1100),c="";return window.addEventListener("keydown",async function(m){l+=m.key,W.slice(0,l.length)!==l&&(l=""),l.length===W.length&&(l===W&&(c="",v.value=-50,setTimeout(()=>{c="active",v.value=-100},1500)),l="")}),(m,r)=>(n(),o("div",{id:"duck-container",style:Q({right:y(v).toString()+"vh"}),class:S(y(c))},r[0]||(r[0]=[e("img",{alt:"Duck",class:"logo",src:Ce,style:{height:"100vh"}},null,-1)]),6))}},Ee=O(Pe,[["__scopeId","data-v-0f098a42"]]),Le={style:{"font-size":"20px"},class:"mb-1"},je={key:0,class:"d-flex"},Ue={key:2,style:{position:"relative",top:"7px"},class:"spinner-border spinner-border-sm text-primary ms-1",role:"status"},Me={class:"visually-hidden"},Se={key:1,class:"d-flex"},Fe={key:2,style:{position:"relative",top:"7px"},class:"spinner-border spinner-border-sm text-primary ms-1",role:"status"},Ie={class:"visually-hidden"},De={key:2,class:"text-warning"},Ne=D({__name:"PluginForm",emits:["cancel"],setup(P,{expose:l,emit:v}){const c=N(),m=v;l({setPanopticMl:d});const r=_("github"),i=_(""),u=_(""),h=_(""),f=_(!1),b=$(()=>c.data.plugins.map(t=>t.name)),k=$(()=>!(h.value==""||b.value.includes(h.value))),x=$(()=>r.value=="github"&&i.value.length>0||r.value=="local"&&u.value.length>0),R=$(()=>x.value&&k.value),V=$(()=>x.value&&b.value.includes(h.value)?"main.home.plugins.error_name_not_unique":x.value?"main.home.plugins.require_unique_name":r.value=="github"?"main.home.plugins.require_url":"main.home.plugins.require_folder");function z(t){if(!t)return;u.value=t;let s=t.split("/"),p=s[s.length-1]||s[s.length-2];p&&(h.value=p)}function B(){c.showModal(I.FOLDERSELECTION,{callback:z})}function H(){if(r.value=="github"&&h.value==""){const t=i.value.split("/"),s=t[t.length-1],p=s.endsWith(".git")?s.slice(0,-4):s;h.value=p}}async function A(){f.value=!0,await q();const t={pluginName:h.value};r.value=="github"&&(t.gitUrl=i.value),r.value=="local"&&(t.path=u.value),await c.addPlugin(t),f.value=!1,m("cancel")}function d(){r.value="github",i.value="https://github.com/CERES-Sorbonne/PanopticML",h.value="PanopticML"}return(t,s)=>(n(),o("div",null,[e("div",Le,[e("i",{class:S(["bi bi-github rounded bbb me-1",r.value=="github"?"selected":""]),onClick:s[0]||(s[0]=p=>r.value="github")},null,2),e("i",{class:S(["bi bi-folder rounded bbb me-1",r.value=="local"?"selected":""]),onClick:s[1]||(s[1]=p=>r.value="local")},null,2)]),r.value=="github"?(n(),o("div",je,[s[7]||(s[7]=e("i",{class:"bi bi-github me-2 ms-1",style:{"font-size":"19px"}},null,-1)),E(e("input",{type:"url","onUpdate:modelValue":s[2]||(s[2]=p=>i.value=p),placeholder:"Enter git url",style:{width:"250px"}},null,512),[[j,i.value]]),x.value?E((n(),o("input",{key:0,"onUpdate:modelValue":s[3]||(s[3]=p=>h.value=p),type:"text",placeholder:"plugin unique name",style:{width:"150px"},class:"ms-2",onFocus:H},null,544)),[[j,h.value]]):g("",!0),R.value?(n(),o("div",{key:1,class:"bbb ms-2",onClick:A},a(t.$t("main.home.plugins.install")),1)):g("",!0),f.value?(n(),o("div",Ue,[e("span",Me,a(t.$t("main.home.plugins.load")),1)])):g("",!0)])):g("",!0),r.value=="local"?(n(),o("div",Se,[e("div",{class:"bbb pe-2 me-2",style:{"white-space":"nowrap"},onClick:B},s[8]||(s[8]=[e("i",{class:"bi bi-folder me-2 ms-1"},null,-1),C("Select")])),E(e("input",{type:"url","onUpdate:modelValue":s[4]||(s[4]=p=>u.value=p),placeholder:"Folder path",style:{width:"180px"}},null,512),[[j,u.value]]),x.value?E((n(),o("input",{key:0,"onUpdate:modelValue":s[5]||(s[5]=p=>h.value=p),type:"text",placeholder:"plugin unique name",style:{width:"150px"},class:"ms-2"},null,512)),[[j,h.value]]):g("",!0),R.value?(n(),o("div",{key:1,class:"bbb ms-2",onClick:A},a(t.$t("main.home.plugins.install")),1)):g("",!0),f.value?(n(),o("div",Fe,[e("span",Ie,a(t.$t("main.home.plugins.load")),1)])):g("",!0)])):g("",!0),e("div",{class:S(["mt-2 mb-2",V.value.includes(".error")?"text-danger":""])},a(t.$t(V.value)),3),r.value!="github"||r.value=="github"&&!i.value.includes("github.com/CERES-Sorbonne")?(n(),o("div",De,a(t.$t("main.home.plugins.warning")),1)):g("",!0),e("div",null,[e("div",{class:"bbb mt-2 text-center",style:{width:"70px"},onClick:s[6]||(s[6]=p=>m("cancel"))},"Cancel")])]))}}),Oe=O(Ne,[["__scopeId","data-v-8b26e035"]]),Re={class:"bb"},Ve={class:"p-2"},Ae={key:0,class:"bi bi-arrow-clockwise me-1"},Te={key:1,class:"spinner-border spinner-border-sm text-primary",role:"status",style:{"margin-right":"5px"}},qe={key:2,class:"bi bi-check2 text-success me-1"},ze={key:3},Be={key:4},He={style:{"max-width":"200px","word-break":"break-all"}},We={class:"text-secondary"},Je={key:0},Ge={class:"text-secondary"},Ke=D({__name:"PluginOptionsDropdown",props:{plugin:{}},setup(P){const l=N(),v=P,c=_(!1),m=_(!1);async function r(){c.value=!0,m.value=!1,await q();try{let i=await l.updatePlugin(v.plugin);m.value=i}catch{}c.value=!1}return(i,u)=>(n(),M(G,null,{button:F(()=>[e("div",null,[e("span",Re,[C(a(v.plugin.name)+" ",1),u[1]||(u[1]=e("i",{class:"bi bi-three-dots-vertical"},null,-1))])])]),popup:F(()=>[e("div",Ve,[e("div",{class:"bb",onClick:u[0]||(u[0]=h=>y(l).delPlugin(v.plugin.path))},[u[2]||(u[2]=e("i",{class:"bi bi-trash me-1"},null,-1)),C(" "+a(i.$t("plugin.remove")),1)]),e("div",{class:"bb",onClick:r},[!c.value&&!m.value?(n(),o("i",Ae)):g("",!0),c.value&&!m.value?(n(),o("div",Te,u[3]||(u[3]=[e("span",{class:"visually-hidden"},"Loading...",-1)]))):g("",!0),m.value?(n(),o("i",qe)):g("",!0),v.plugin.sourceUrl?(n(),o("span",ze,a(i.$t("plugin.update")),1)):(n(),o("span",Be,a(i.$t("plugin.update_local")),1))]),u[6]||(u[6]=e("div",{class:"custom-hr mt-1 mb-1"},null,-1)),e("div",He,[e("div",null,[e("span",null,a(i.$t("plugin.path")),1),u[4]||(u[4]=e("br",null,null,-1)),e("span",We,a(i.plugin.path),1)]),i.plugin.sourceUrl?(n(),o("div",Je,[e("span",null,a(i.$t("plugin.source")),1),u[5]||(u[5]=e("br",null,null,-1)),e("span",Ge,a(i.plugin.sourceUrl),1)])):g("",!0)])])]),_:1}))}}),Qe={key:0},Xe={class:"window2 d-flex"},Ye={key:0,class:"project-menu"},Ze={class:"d-flex"},et=["onClick"],tt={class:"m-0"},st={class:"m-0 p-0 text-wrap text-break dimmed-2",style:{"font-size":"13px"}},lt={class:"project-option flex-shrink-0"},nt={class:"text-start p-1"},ot=["onClick"],at={class:"mt-1"},it=["checked","onChange"],rt={key:1,class:"flex-grow-1"},ut={class:"d-flex flex-column main-menu justify-content-center"},dt={class:"icon"},ct={class:"d-flex justify-content-center gap-1"},pt={class:"dimmed-2 mt-1"},mt={class:"lang"},vt=["value"],ht={id:"main-menu",class:"create-menu mt-5 pt-5"},gt={class:"mt-5 plugin-preview"},bt={class:"text-center"},ft={key:0,class:"text-center"},_t={class:"flex-grow-1 plugin-preview",style:{"overflow-y":"auto"}},yt={key:1},$t={style:{display:"inline-block"}},kt={key:2,class:"text-center mt-5 w-100"},wt=D({__name:"HomeView",setup(P){const l=N(),v=_(0),c=_(!1),m=_(null),r=_(!0),i=["fr","en"],u=$(()=>Array.isArray(l.data.status.projects)&&l.data.status.projects.length>0),h=$(()=>!u.value&&l.data.init),f=$(()=>!u.value&&l.data.init&&l.openModalId!==I.FIRSTMODAL),b=$(()=>l.data.plugins.some(d=>d.sourceUrl&&d.sourceUrl.includes("https://github.com/CERES-Sorbonne/PanopticML"))),k=$(()=>{const d={};return l.data.status.projects.forEach(t=>{d[t.path]={},l.data.plugins.forEach(s=>d[t.path][s.name]=!0),l.data.status.ignoredPlugins[t.path]&&l.data.status.ignoredPlugins[t.path].forEach(s=>{d[t.path][s]=!1})}),d});function x(d){return d.replaceAll("-","‑")}function R(d){d.path&&d.name&&l.createProject(d.path,d.name)}function V(d){l.importProject(d)}async function z(){c.value=!0,await q(),m.value.setPanopticMl()}async function B(){r.value=!1,await q(),r.value=!0}async function H(d,t,s){await l.updateIgnorePlugin(d,t,!s)}async function A(){try{const d=await l.getPackagesInfo(),t=JSON.stringify(d,null,2),s=new Blob([t],{type:"application/json"}),p=URL.createObjectURL(s),w=document.createElement("a");w.href=p,w.download="panoptic_infos.json",w.click(),URL.revokeObjectURL(p)}catch(d){console.error("Erreur lors de la récupération ou du téléchargement des données :",d)}}return X(()=>{l.isProjectLoaded&&Y.push("/view"),h.value&&l.showModal(I.FIRSTMODAL)}),(d,t)=>r.value?(n(),o("div",Qe,[L(Ee),f.value?(n(),M(se,{key:0})):g("",!0),e("div",Xe,[u.value?(n(),o("div",Ye,[(n(!0),o(U,null,T(y(l).data.status.projects,s=>(n(),o("div",Ze,[e("div",{class:"project flex-grow-1 overflow-hidden",onClick:p=>y(l).loadProject(s.path)},[e("h5",tt,a(s.name),1),e("div",st,a(x(s.path)),1)],8,et),e("div",lt,[L(G,null,{button:F(()=>t[5]||(t[5]=[e("div",{style:{position:"relative",top:"10px"}},[e("i",{class:"bb bi bi-three-dots-vertical"})],-1)])),popup:F(({hide:p})=>[e("div",nt,[e("div",{onClick:w=>{y(l).deleteProject(s.path),p()},class:"bb"},t[6]||(t[6]=[e("i",{class:"bi bi-trash me-1"},null,-1),C("delete ")]),8,ot),t[7]||(t[7]=e("div",{style:{"border-top":"1px solid var(--border-color)",width:"100%"},class:"mt-1"},null,-1)),(n(!0),o(U,null,T(y(l).data.plugins,w=>(n(),o("div",at,[e("input",{type:"checkbox",class:"me-1",checked:k.value[s.path][w.name],onChange:K=>H(s.path,w.name,K.target.checked)},null,40,it),C(a(w.name),1)]))),256))])]),_:2},1024)])]))),256))])):g("",!0),y(l).data.init?(n(),o("div",rt,[e("div",ut,[e("div",null,[e("div",dt,[L(Z)]),t[9]||(t[9]=e("h1",{class:"m-0 p-0"},"Panoptic",-1)),e("div",ct,[e("h6",pt,"Version "+a(y(l).data.version),1),L(ee,{message:"main.home.version_tooltip"},{default:F(()=>[e("i",{class:"bb bi-bug",style:{"margin-right":"0.5rem"},onClick:A})]),_:1})]),e("div",mt,[t[8]||(t[8]=e("i",{class:"bi bi-translate",style:{"margin-right":"0.5rem"}},null,-1)),E(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>d.$i18n.locale=s),onChange:B},[(n(),o(U,null,T(i,(s,p)=>e("option",{key:`Lang${p}`,value:s},a(s.toUpperCase()),9,vt)),64))],544),[[te,d.$i18n.locale]])])]),e("div",ht,[v.value==0?(n(),M(xe,{key:0,onCreate:t[1]||(t[1]=s=>v.value=1),onImport:V})):g("",!0),v.value==1?(n(),M(ve,{key:1,onCancel:t[2]||(t[2]=s=>v.value=0),onCreate:R})):g("",!0)]),e("div",gt,[e("h5",bt,[t[10]||(t[10]=C(" Plugins ")),e("span",{class:"sb bi bi-plus",style:{position:"relative",top:"1px"},onClick:t[3]||(t[3]=s=>c.value=!0)})]),b.value?g("",!0):(n(),o("div",ft,[e("span",{class:"bb ms-1 me-1",onClick:z},[t[11]||(t[11]=e("i",{class:"bi bi-lightbulb"},null,-1)),C(" "+a(d.$t("main.home.plugins.install_panoptic_ml")),1)])]))]),e("div",_t,[c.value?(n(),M(Oe,{key:0,onCancel:t[4]||(t[4]=s=>c.value=!1),ref_key:"pluginFormElem",ref:m},null,512)):(n(),o("div",yt,[(n(!0),o(U,null,T(y(l).data.plugins,s=>(n(),o("div",$t,[L(Ke,{plugin:s},null,8,["plugin"])]))),256))]))])])])):(n(),o("div",kt,t[12]||(t[12]=[e("p",null,"Waiting for Server...",-1)])))])])):g("",!0)}}),Pt=O(wt,[["__scopeId","data-v-74172ef7"]]);export{Pt as default};
