import{d as R,u as T,r as w,c as k,a as l,b as e,t as p,e as x,w as E,v as I,n as M,M as L,o as s,g as G,p as F,f as j,_ as V,F as U,h as Z,i as g,j as O,k as J,l as ee,m as te,q as B,s as D,x as H,y as se,z as K,D as oe,P as le}from"./index-621021d3.js";import{_ as ne}from"./Tutorial-793b30ce.js";const Q=a=>(F("data-v-a138fd7d"),a=a(),j(),a),ae={class:""},ie={class:"mb-3"},ce={class:"d-flex text-start input mb-2"},re={class:"info"},ue={key:0},de={key:1,class:"text-placeholder"},pe=Q(()=>e("i",{class:"bi bi-folder"},null,-1)),ve=[pe],_e={class:"d-flex text-start input"},me={class:"info"},he={class:"flex-grow-1 value text-dim"},ge={class:"d-flex mt-2"},fe=Q(()=>e("div",{class:"flex-grow-1"},null,-1)),be=R({__name:"Create",emits:["cancel","create"],setup(a,{emit:t}){const f=T(),r=t,v=w(""),o=w(""),m=k(()=>v.value!=""&&o.value!="");function b(_){_&&(v.value=_)}function u(){f.showModal(L.FOLDERSELECTION,{callback:b,mode:"create"})}return(_,y)=>(s(),l("div",ae,[e("h3",ie,p(_.$t("main.home.create_title")),1),e("div",ce,[e("div",re,p(_.$t("main.home.label.folder")),1),e("div",{class:"flex-grow-1 value text-dim",style:{cursor:"pointer"},onClick:u},[v.value!=""?(s(),l("span",ue,p(v.value),1)):(s(),l("span",de,p(_.$t("main.home.label.path_placeholder")),1))]),e("div",{id:"select-folder",class:"folder",style:{cursor:"pointer"},onClick:y[0]||(y[0]=C=>{u(),x(G)()})},ve)]),e("div",_e,[e("div",me,p(_.$t("main.home.label.name")),1),e("div",he,[E(e("input",{type:"text","onUpdate:modelValue":y[1]||(y[1]=C=>o.value=C),placeholder:"project_name",style:{width:"100%"}},null,512),[[I,o.value]])])]),e("div",ge,[fe,e("div",{class:"btn-grey hover-grey",onClick:y[2]||(y[2]=C=>r("cancel"))},p(_.$t("main.home.label.cancel")),1),e("div",{id:"confirm-create",class:M(["ms-2",m.value?"btn-blue":"btn-grey text-dim"]),onClick:y[3]||(y[3]=C=>{r("create",{path:v.value,name:o.value}),x(G)()})},p(_.$t("main.home.label.create")),3)])]))}});const ye=V(be,[["__scopeId","data-v-a138fd7d"]]),X=a=>(F("data-v-8347c798"),a=a(),j(),a),$e={class:"create-option d-flex"},we=X(()=>e("div",{class:"flex-grow-1"},[e("h6",{class:"create-title m-0"},"Créer un nouveau projet"),e("span",{class:"create-explanation"},"Créer un nouveau projet panoptic dans un dossier.")],-1)),ke=X(()=>e("div",{class:"flex-grow-1"},[e("h6",{class:"create-title m-0"},"Importer un projet"),e("span",{class:"create-explanation"},"Choisissez un dossier Panoptic existant.")],-1)),xe=R({__name:"Options",emits:["create","import"],setup(a,{emit:t}){const f=T(),r=t;function v(m){m&&r("import",m)}function o(){f.showModal(L.FOLDERSELECTION,{callback:v,mode:"import"})}return(m,b)=>(s(),l(U,null,[e("div",$e,[we,e("div",{id:"create-project",class:"create-btn highlight",onClick:b[0]||(b[0]=u=>{r("create"),x(G)()})},"Créer")]),e("div",{class:"create-option d-flex"},[ke,e("div",{class:"create-btn",onClick:o},"Importer")])],64))}});const Ce=V(xe,[["__scopeId","data-v-8347c798"]]),Pe="/assets/duck-0f72bec4.svg";const Se=a=>(F("data-v-01169a42"),a=a(),j(),a),Ee=Se(()=>e("img",{alt:"Duck",class:"logo",src:Pe,style:{height:"100vh"}},null,-1)),Ie=[Ee],W="ArrowUpArrowUpArrowDownArrowDownArrowLeftArrowRightArrowLeftArrowRightba",Me={__name:"Egg",setup(a){let t="",f=w(-1100),r="";return window.addEventListener("keydown",async function(v){t+=v.key,W.slice(0,t.length)!==t&&(t=""),t.length===W.length&&(t===W&&(r="",f.value=-300,setTimeout(()=>{r="active",f.value=-1100},1500)),t="")}),(v,o)=>(s(),l("div",{id:"duck-container",style:Z({right:x(f).toString()+"px"}),class:M(x(r))},Ie,6))}},Le=V(Me,[["__scopeId","data-v-01169a42"]]),Y=a=>(F("data-v-0ece9efe"),a=a(),j(),a),Fe={style:{"font-size":"20px"},class:"mb-1"},je={key:0,class:"d-flex"},Ve=Y(()=>e("i",{class:"bi bi-github me-2 ms-1",style:{"font-size":"19px"}},null,-1)),Ne={key:2,style:{position:"relative",top:"7px"},class:"spinner-border spinner-border-sm text-primary ms-1",role:"status"},Ae={class:"visually-hidden"},De={key:1,class:"d-flex"},Ue=Y(()=>e("i",{class:"bi bi-folder me-2 ms-1"},null,-1)),Oe={key:2,style:{position:"relative",top:"7px"},class:"spinner-border spinner-border-sm text-primary ms-1",role:"status"},Re={class:"visually-hidden"},Te={key:2,class:"text-warning"},qe=R({__name:"PluginForm",emits:["cancel"],setup(a,{expose:t,emit:f}){const r=T(),v=f;t({setPanopticMl:d});const o=w("github"),m=w(""),b=w(""),u=w(""),_=w(!1),y=k(()=>r.data.plugins.map(n=>n.name)),C=k(()=>!(u.value==""||y.value.includes(u.value))),P=k(()=>o.value=="github"&&m.value.length>0||o.value=="local"&&b.value.length>0),N=k(()=>P.value&&C.value),A=k(()=>P.value&&y.value.includes(u.value)?"main.home.plugins.error_name_not_unique":P.value?"main.home.plugins.require_unique_name":o.value=="github"?"main.home.plugins.require_url":"main.home.plugins.require_folder");function q(n){if(!n)return;b.value=n;let i=n.split("/"),h=i[i.length-1]||i[i.length-2];h&&(u.value=h)}function z(){r.showModal(L.FOLDERSELECTION,{callback:q})}function c(){if(o.value=="github"&&u.value==""){const n=m.value.split("/"),i=n[n.length-1],h=i.endsWith(".git")?i.slice(0,-4):i;u.value=h}}async function $(){_.value=!0,await J();const n={pluginName:u.value};o.value=="github"&&(n.gitUrl=m.value),o.value=="local"&&(n.path=b.value),await r.addPlugin(n),_.value=!1,v("cancel")}function d(){o.value="github",m.value="https://github.com/CERES-Sorbonne/PanopticML",u.value="PanopticML"}return(n,i)=>(s(),l("div",null,[e("div",Fe,[e("i",{class:M(["bi bi-github rounded bbb me-1",o.value=="github"?"selected":""]),onClick:i[0]||(i[0]=h=>o.value="github")},null,2),e("i",{class:M(["bi bi-folder rounded bbb me-1",o.value=="local"?"selected":""]),onClick:i[1]||(i[1]=h=>o.value="local")},null,2)]),o.value=="github"?(s(),l("div",je,[Ve,E(e("input",{type:"url","onUpdate:modelValue":i[2]||(i[2]=h=>m.value=h),placeholder:"Enter git url",style:{width:"250px"}},null,512),[[I,m.value]]),P.value?E((s(),l("input",{key:0,"onUpdate:modelValue":i[3]||(i[3]=h=>u.value=h),type:"text",placeholder:"plugin unique name",style:{width:"150px"},class:"ms-2",onFocus:c},null,544)),[[I,u.value]]):g("",!0),N.value?(s(),l("div",{key:1,class:"bbb ms-2",onClick:$},p(n.$t("main.home.plugins.install")),1)):g("",!0),_.value?(s(),l("div",Ne,[e("span",Ae,p(n.$t("main.home.plugins.load")),1)])):g("",!0)])):g("",!0),o.value=="local"?(s(),l("div",De,[e("div",{class:"bbb pe-2 me-2",onClick:z},[Ue,O("Select")]),E(e("input",{type:"url","onUpdate:modelValue":i[4]||(i[4]=h=>b.value=h),placeholder:"Folder path",style:{width:"180px"}},null,512),[[I,b.value]]),P.value?E((s(),l("input",{key:0,"onUpdate:modelValue":i[5]||(i[5]=h=>u.value=h),type:"text",placeholder:"plugin unique name",style:{width:"150px"},class:"ms-2"},null,512)),[[I,u.value]]):g("",!0),N.value?(s(),l("div",{key:1,class:"bbb ms-2",onClick:$},p(n.$t("main.home.plugins.install")),1)):g("",!0),_.value?(s(),l("div",Oe,[e("span",Re,p(n.$t("main.home.plugins.load")),1)])):g("",!0)])):g("",!0),e("div",{class:M(["mt-2 mb-2",A.value.includes(".error")?"text-danger":""])},p(n.$t(A.value)),3),o.value!="github"||o.value=="github"&&!m.value.includes("github.com/CERES-Sorbonne")?(s(),l("div",Te,p(n.$t("main.home.plugins.warning")),1)):g("",!0),e("div",null,[e("div",{class:"bbb mt-2 text-center",style:{width:"70px"},onClick:i[6]||(i[6]=h=>v("cancel"))},"Cancel")])]))}});const ze=V(qe,[["__scopeId","data-v-0ece9efe"]]),S=a=>(F("data-v-74778545"),a=a(),j(),a),Be={key:0},He={class:"window2 d-flex"},We={key:0,class:"project-menu"},Ge={class:"d-flex"},Je=["onClick"],Ke={class:"m-0"},Qe={class:"m-0 p-0 text-wrap text-break dimmed-2",style:{"font-size":"13px"}},Xe={class:"project-option flex-shrink-0"},Ye=S(()=>e("i",{class:"bi bi-three-dots-vertical"},null,-1)),Ze={class:"text-start"},et=["onClick"],tt=S(()=>e("i",{class:"bi bi-trash me-1"},null,-1)),st={key:1,class:"flex-grow-1"},ot={class:"d-flex flex-column main-menu justify-content-center"},lt={class:"icon"},nt=S(()=>e("h1",{class:"m-0 p-0"},"Panoptic",-1)),at=S(()=>e("h6",{class:"dimmed-2"},"Version 0.4",-1)),it={class:"lang"},ct=S(()=>e("i",{class:"bi bi-translate",style:{"margin-right":"0.5rem"}},null,-1)),rt=["value"],ut={id:"main-menu",class:"create-menu mt-5 pt-5"},dt={class:"mt-5 plugin-preview"},pt={class:"text-center"},vt={key:0,class:"text-center"},_t=S(()=>e("i",{class:"bi bi-lightbulb"},null,-1)),mt={class:"flex-grow-1 plugin-preview",style:{"overflow-y":"auto"}},ht={key:1},gt={class:"ps-1"},ft=["onClick"],bt={key:2,class:"text-center mt-5 w-100"},yt=S(()=>e("p",null,"Waiting for Server...",-1)),$t=[yt],wt=R({__name:"HomeView",setup(a){const t=T(),f=w(0),r=w(!1),v=w(null),o=w(!0),m=["fr","en"],b=k(()=>Array.isArray(t.data.status.projects)&&t.data.status.projects.length>0),u=k(()=>!b.value&&t.data.init),_=k(()=>!b.value&&t.data.init&&t.openModalId!==L.FIRSTMODAL),y=k(()=>t.data.plugins.some(c=>c.sourceUrl&&c.sourceUrl.includes("https://github.com/CERES-Sorbonne/PanopticML")));function C(c){return c.replaceAll("-","‑")}function P(c){c.path&&c.name&&t.createProject(c.path,c.name)}function N(c){t.importProject(c)}function A(c){t.delPlugin(c)}async function q(){r.value=!0,await J(),v.value.setPanopticMl()}async function z(){o.value=!1,await J(),o.value=!0}return ee(()=>{t.isProjectLoaded&&te.push("/view"),u.value&&t.showModal(L.FIRSTMODAL)}),(c,$)=>o.value?(s(),l("div",Be,[B(Le),_.value?(s(),D(ne,{key:0})):g("",!0),e("div",He,[b.value?(s(),l("div",We,[(s(!0),l(U,null,H(x(t).data.status.projects,d=>(s(),l("div",Ge,[e("div",{class:"project flex-grow-1 overflow-hidden",onClick:n=>x(t).loadProject(d.path)},[e("h5",Ke,p(d.name),1),e("div",Qe,p(C(d.path)),1)],8,Je),e("div",Xe,[B(oe,null,{button:K(()=>[Ye]),popup:K(({hide:n})=>[e("div",Ze,[e("div",{onClick:i=>{x(t).deleteProject(d.path),n()},class:"m-1 base-hover p-1"},[tt,O("delete ")],8,et)])]),_:2},1024)])]))),256))])):g("",!0),x(t).data.init?(s(),l("div",st,[e("div",ot,[e("div",null,[e("div",lt,[B(le)]),nt,at,e("div",it,[ct,E(e("select",{"onUpdate:modelValue":$[0]||($[0]=d=>c.$i18n.locale=d),onChange:z},[(s(),l(U,null,H(m,(d,n)=>e("option",{key:`Lang${n}`,value:d},p(d.toUpperCase()),9,rt)),64))],544),[[se,c.$i18n.locale]])])]),e("div",ut,[f.value==0?(s(),D(Ce,{key:0,onCreate:$[1]||($[1]=d=>f.value=1),onImport:N})):g("",!0),f.value==1?(s(),D(ye,{key:1,onCancel:$[2]||($[2]=d=>f.value=0),onCreate:P})):g("",!0)]),e("div",dt,[e("h5",pt,[O(" Plugins "),e("span",{class:"sb bi bi-plus",style:{position:"relative",top:"1px"},onClick:$[3]||($[3]=d=>r.value=!0)})]),y.value?g("",!0):(s(),l("div",vt,[e("span",{class:"bb ms-1 me-1",onClick:q},[_t,O(" "+p(c.$t("main.home.plugins.install_panoptic_ml")),1)])]))]),e("div",mt,[r.value?(s(),D(ze,{key:0,onCancel:$[4]||($[4]=d=>r.value=!1),ref_key:"pluginFormElem",ref:v},null,512)):(s(),l("div",ht,[(s(!0),l(U,null,H(x(t).data.plugins,d=>(s(),l("div",gt,[e("span",{onClick:n=>A(d.path),class:"bi bi-x base-hover"},null,8,ft),e("span",null,p(d.name),1)]))),256))]))])])])):(s(),l("div",bt,$t))])])):g("",!0)}});const Ct=V(wt,[["__scopeId","data-v-74778545"]]);export{Ct as default};
