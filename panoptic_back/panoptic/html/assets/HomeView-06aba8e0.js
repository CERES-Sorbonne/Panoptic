import{d as R,u as T,r as $,c as x,a as l,b as e,t as d,e as k,w as I,v as M,n as F,M as L,o as s,g as H,p as j,f as N,_ as V,F as O,h as Z,i as g,j as U,k as J,l as ee,m as te,q as z,s as D,x as W,y as G,D as se,P as oe}from"./index-0851bac0.js";import{_ as le}from"./Tutorial-0345291e.js";const K=n=>(j("data-v-9d2b8ee6"),n=n(),N(),n),ne={class:""},ae={class:"mb-3"},ie={class:"d-flex text-start input mb-2"},ce={class:"info"},ue={key:0},re={key:1,class:"text-placeholder"},de=K(()=>e("i",{class:"bi bi-folder"},null,-1)),pe=[de],ve={class:"d-flex text-start input"},_e={class:"info"},me={class:"flex-grow-1 value text-dim"},he={class:"d-flex mt-2"},ge=K(()=>e("div",{class:"flex-grow-1"},null,-1)),fe=R({__name:"Create",emits:["cancel","create"],setup(n,{emit:t}){const h=T(),c=t,p=$(""),o=$(""),_=x(()=>p.value!=""&&o.value!="");function y(v){v&&(p.value=v)}function u(){h.showModal(L.FOLDERSELECTION,{callback:y,mode:"create"})}return(v,f)=>(s(),l("div",ne,[e("h3",ae,d(v.$t("main.home.create_title")),1),e("div",ie,[e("div",ce,d(v.$t("main.home.label.folder")),1),e("div",{class:"flex-grow-1 value text-dim",style:{cursor:"pointer"},onClick:u},[p.value!=""?(s(),l("span",ue,d(p.value),1)):(s(),l("span",re,d(v.$t("main.home.label.path_placeholder")),1))]),e("div",{id:"select-folder",class:"folder",style:{cursor:"pointer"},onClick:f[0]||(f[0]=C=>{u(),k(H)()})},pe)]),e("div",ve,[e("div",_e,d(v.$t("main.home.label.name")),1),e("div",me,[I(e("input",{type:"text","onUpdate:modelValue":f[1]||(f[1]=C=>o.value=C),placeholder:"project_name",style:{width:"100%"}},null,512),[[M,o.value]])])]),e("div",he,[ge,e("div",{class:"btn-grey hover-grey",onClick:f[2]||(f[2]=C=>c("cancel"))},d(v.$t("main.home.label.cancel")),1),e("div",{id:"confirm-create",class:F(["ms-2",_.value?"btn-blue":"btn-grey text-dim"]),onClick:f[3]||(f[3]=C=>{c("create",{path:p.value,name:o.value}),k(H)()})},d(v.$t("main.home.label.create")),3)])]))}});const be=V(fe,[["__scopeId","data-v-9d2b8ee6"]]),Q=n=>(j("data-v-f878743d"),n=n(),N(),n),ye={class:"create-option d-flex"},$e=Q(()=>e("div",{class:"flex-grow-1"},[e("h6",{class:"create-title m-0"},"Créer un nouveau projet"),e("span",{class:"create-explanation"},"Créer un nouveau projet panoptic dans un dossier.")],-1)),we=Q(()=>e("div",{class:"flex-grow-1"},[e("h6",{class:"create-title m-0"},"Importer un projet"),e("span",{class:"create-explanation"},"Choisissez un dossier Panoptic existant.")],-1)),xe=R({__name:"Options",emits:["create","import"],setup(n,{emit:t}){const h=T(),c=t;function p(_){_&&c("import",_)}function o(){h.showModal(L.FOLDERSELECTION,{callback:p,mode:"import"})}return(_,y)=>(s(),l(O,null,[e("div",ye,[$e,e("div",{id:"create-project",class:"create-btn highlight",onClick:y[0]||(y[0]=u=>{c("create"),k(H)()})},"Créer")]),e("div",{class:"create-option d-flex"},[we,e("div",{class:"create-btn",onClick:o},"Importer")])],64))}});const ke=V(xe,[["__scopeId","data-v-f878743d"]]),Ce="/assets/duck-0f72bec4.svg";const Pe=n=>(j("data-v-aa87a019"),n=n(),N(),n),Se=Pe(()=>e("img",{alt:"Duck",class:"logo",src:Ce,style:{height:"100vh"}},null,-1)),Ee=[Se],B="ArrowUpArrowUpArrowDownArrowDownArrowLeftArrowRightArrowLeftArrowRightba",Ie={__name:"Egg",setup(n){let t="",h=$(-1100),c="";return window.addEventListener("keydown",async function(p){t+=p.key,B.slice(0,t.length)!==t&&(t=""),t.length===B.length&&(t===B&&(c="",h.value=-300,setTimeout(()=>{c="active",h.value=-1100},1500)),t="")}),(p,o)=>(s(),l("div",{id:"duck-container",style:Z({right:k(h).toString()+"px"}),class:F(k(c))},Ee,6))}},Me=V(Ie,[["__scopeId","data-v-aa87a019"]]),X=n=>(j("data-v-37b550a0"),n=n(),N(),n),Fe={style:{"font-size":"20px"},class:"mb-1"},Le={key:0,class:"d-flex"},je=X(()=>e("i",{class:"bi bi-github me-2 ms-1",style:{"font-size":"19px"}},null,-1)),Ne={key:2,style:{position:"relative",top:"7px"},class:"spinner-border spinner-border-sm text-primary ms-1",role:"status"},Ve={class:"visually-hidden"},Ae={key:1,class:"d-flex"},De=X(()=>e("i",{class:"bi bi-folder me-2 ms-1"},null,-1)),Oe={key:2,style:{position:"relative",top:"7px"},class:"spinner-border spinner-border-sm text-primary ms-1",role:"status"},Ue={class:"visually-hidden"},Re={key:2,class:"text-warning"},Te=R({__name:"PluginForm",emits:["cancel"],setup(n,{expose:t,emit:h}){const c=T(),p=h;t({setPanopticMl:Y});const o=$("github"),_=$(""),y=$(""),u=$(""),v=$(!1),f=x(()=>c.data.plugins.map(i=>i.name)),C=x(()=>!(u.value==""||f.value.includes(u.value))),P=x(()=>o.value=="github"&&_.value.length>0||o.value=="local"&&y.value.length>0),A=x(()=>P.value&&C.value),r=x(()=>P.value&&f.value.includes(u.value)?"main.home.plugins.error_name_not_unique":P.value?"main.home.plugins.require_unique_name":o.value=="github"?"main.home.plugins.require_url":"main.home.plugins.require_folder");function w(i){if(!i)return;y.value=i;let a=i.split("/"),m=a[a.length-1]||a[a.length-2];m&&(u.value=m)}function b(){c.showModal(L.FOLDERSELECTION,{callback:w})}function E(){if(o.value=="github"&&u.value==""){const i=_.value.split("/"),a=i[i.length-1],m=a.endsWith(".git")?a.slice(0,-4):a;u.value=m}}async function q(){v.value=!0,await J();const i={pluginName:u.value};o.value=="github"&&(i.gitUrl=_.value),o.value=="local"&&(i.path=y.value),await c.addPlugin(i),v.value=!1,p("cancel")}function Y(){o.value="github",_.value="https://github.com/CERES-Sorbonne/PanopticML",u.value="PanopticML"}return(i,a)=>(s(),l("div",null,[e("div",Fe,[e("i",{class:F(["bi bi-github rounded bbb me-1",o.value=="github"?"selected":""]),onClick:a[0]||(a[0]=m=>o.value="github")},null,2),e("i",{class:F(["bi bi-folder rounded bbb me-1",o.value=="local"?"selected":""]),onClick:a[1]||(a[1]=m=>o.value="local")},null,2)]),o.value=="github"?(s(),l("div",Le,[je,I(e("input",{type:"url","onUpdate:modelValue":a[2]||(a[2]=m=>_.value=m),placeholder:"Enter git url",style:{width:"250px"}},null,512),[[M,_.value]]),P.value?I((s(),l("input",{key:0,"onUpdate:modelValue":a[3]||(a[3]=m=>u.value=m),type:"text",placeholder:"plugin unique name",style:{width:"150px"},class:"ms-2",onFocus:E},null,544)),[[M,u.value]]):g("",!0),A.value?(s(),l("div",{key:1,class:"bbb ms-2",onClick:q},d(i.$t("main.home.plugins.install")),1)):g("",!0),v.value?(s(),l("div",Ne,[e("span",Ve,d(i.$t("main.home.plugins.load")),1)])):g("",!0)])):g("",!0),o.value=="local"?(s(),l("div",Ae,[e("div",{class:"bbb pe-2 me-2",onClick:b},[De,U("Select")]),I(e("input",{type:"url","onUpdate:modelValue":a[4]||(a[4]=m=>y.value=m),placeholder:"Folder path",style:{width:"180px"}},null,512),[[M,y.value]]),P.value?I((s(),l("input",{key:0,"onUpdate:modelValue":a[5]||(a[5]=m=>u.value=m),type:"text",placeholder:"plugin unique name",style:{width:"150px"},class:"ms-2"},null,512)),[[M,u.value]]):g("",!0),A.value?(s(),l("div",{key:1,class:"bbb ms-2",onClick:q},d(i.$t("main.home.plugins.install")),1)):g("",!0),v.value?(s(),l("div",Oe,[e("span",Ue,d(i.$t("main.home.plugins.load")),1)])):g("",!0)])):g("",!0),e("div",{class:F(["mt-2 mb-2",r.value.includes(".error")?"text-danger":""])},d(i.$t(r.value)),3),o.value!="github"||o.value=="github"&&!_.value.includes("github.com/CERES-Sorbonne")?(s(),l("div",Re,d(i.$t("main.home.plugins.warning")),1)):g("",!0),e("div",null,[e("div",{class:"bbb mt-2 text-center",style:{width:"70px"},onClick:a[6]||(a[6]=m=>p("cancel"))},"Cancel")])]))}});const qe=V(Te,[["__scopeId","data-v-37b550a0"]]),S=n=>(j("data-v-117a4655"),n=n(),N(),n),ze={class:"window2 d-flex"},Be={key:0,class:"project-menu"},He={class:"d-flex"},We=["onClick"],Ge={class:"m-0"},Je={class:"m-0 p-0 text-wrap text-break dimmed-2",style:{"font-size":"13px"}},Ke={class:"project-option flex-shrink-0"},Qe=S(()=>e("i",{class:"bi bi-three-dots-vertical"},null,-1)),Xe={class:"text-start"},Ye=["onClick"],Ze=S(()=>e("i",{class:"bi bi-trash me-1"},null,-1)),et={key:1,class:"flex-grow-1"},tt={class:"d-flex flex-column main-menu justify-content-center"},st={class:"icon"},ot=S(()=>e("h1",{class:"m-0 p-0"},"Panoptic",-1)),lt=S(()=>e("h6",{class:"dimmed-2"},"Version 0.4",-1)),nt={id:"main-menu",class:"create-menu mt-5 pt-5"},at={class:"mt-5 plugin-preview"},it={class:"text-center"},ct={key:0,class:"text-center"},ut=S(()=>e("i",{class:"bi bi-lightbulb"},null,-1)),rt={class:"flex-grow-1 plugin-preview",style:{"overflow-y":"auto"}},dt={key:1},pt={class:"ps-1"},vt=["onClick"],_t={key:2,class:"text-center mt-5 w-100"},mt=S(()=>e("p",null,"Waiting for Server...",-1)),ht=[mt],gt=R({__name:"HomeView",setup(n){const t=T(),h=$(0),c=$(!1),p=$(null),o=x(()=>Array.isArray(t.data.status.projects)&&t.data.status.projects.length>0),_=x(()=>!o.value&&t.data.init),y=x(()=>!o.value&&t.data.init&&t.openModalId!==L.FIRSTMODAL),u=x(()=>t.data.plugins.some(r=>r.sourceUrl&&r.sourceUrl.includes("https://github.com/CERES-Sorbonne/PanopticML")));function v(r){return r.replaceAll("-","‑")}function f(r){r.path&&r.name&&t.createProject(r.path,r.name)}function C(r){t.importProject(r)}function P(r){t.delPlugin(r)}async function A(){c.value=!0,await J(),p.value.setPanopticMl()}return ee(()=>{t.isProjectLoaded&&te.push("/view"),_.value&&t.showModal(L.FIRSTMODAL)}),(r,w)=>(s(),l(O,null,[z(Me),y.value?(s(),D(le,{key:0})):g("",!0),e("div",ze,[o.value?(s(),l("div",Be,[(s(!0),l(O,null,W(k(t).data.status.projects,b=>(s(),l("div",He,[e("div",{class:"project flex-grow-1 overflow-hidden",onClick:E=>k(t).loadProject(b.path)},[e("h5",Ge,d(b.name),1),e("div",Je,d(v(b.path)),1)],8,We),e("div",Ke,[z(se,null,{button:G(()=>[Qe]),popup:G(({hide:E})=>[e("div",Xe,[e("div",{onClick:q=>{k(t).deleteProject(b.path),E()},class:"m-1 base-hover p-1"},[Ze,U("delete ")],8,Ye)])]),_:2},1024)])]))),256))])):g("",!0),k(t).data.init?(s(),l("div",et,[e("div",tt,[e("div",null,[e("div",st,[z(oe)]),ot,lt]),e("div",nt,[h.value==0?(s(),D(ke,{key:0,onCreate:w[0]||(w[0]=b=>h.value=1),onImport:C})):g("",!0),h.value==1?(s(),D(be,{key:1,onCancel:w[1]||(w[1]=b=>h.value=0),onCreate:f})):g("",!0)]),e("div",at,[e("h5",it,[U(" Plugins "),e("span",{class:"sb bi bi-plus",style:{position:"relative",top:"1px"},onClick:w[2]||(w[2]=b=>c.value=!0)})]),u.value?g("",!0):(s(),l("div",ct,[e("span",{class:"bb ms-1 me-1",onClick:A},[ut,U(" "+d(r.$t("main.home.plugins.install_panoptic_ml")),1)])]))]),e("div",rt,[c.value?(s(),D(qe,{key:0,onCancel:w[3]||(w[3]=b=>c.value=!1),ref_key:"pluginFormElem",ref:p},null,512)):(s(),l("div",dt,[(s(!0),l(O,null,W(k(t).data.plugins,b=>(s(),l("div",pt,[e("span",{onClick:E=>P(b.path),class:"bi bi-x base-hover"},null,8,vt),e("span",null,d(b.name),1)]))),256))]))])])])):(s(),l("div",_t,ht))])],64))}});const yt=V(gt,[["__scopeId","data-v-117a4655"]]);export{yt as default};
