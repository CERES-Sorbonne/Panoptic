import{d as D,u as T,r as _,c as k,a as o,b as e,t as r,e as w,g as K,w as C,v as L,n as F,M as A,o as s,_ as R,F as O,f as X,P as I,h as m,i as S,j as z,k as V,l as j,D as Q,m as Y,p as Z,q as U,s as N,x as ee,y as te,z as se}from"./index-DWLKTF3F.js";import{_ as le}from"./Tutorial.vue_vue_type_style_index_0_lang-BK-GAJtk.js";const ne={class:""},oe={class:"mb-3"},ie={class:"d-flex text-start input mb-2"},ae={class:"info"},re={key:0},ue={key:1,class:"text-placeholder"},de={class:"d-flex text-start input"},ce={class:"info"},pe={class:"flex-grow-1 value text-dim"},ve={class:"d-flex mt-2"},me=D({__name:"Create",emits:["cancel","create"],setup(E,{emit:i}){const y=T(),g=i,h=_(""),u=_(""),d=k(()=>h.value!=""&&u.value!="");function c(v){v&&(h.value=v)}function $(){y.showModal(A.FOLDERSELECTION,{callback:c,mode:"create"})}return(v,f)=>(s(),o("div",ne,[e("h3",oe,r(v.$t("main.home.create_title")),1),e("div",ie,[e("div",ae,r(v.$t("main.home.label.folder")),1),e("div",{class:"flex-grow-1 value text-dim",style:{cursor:"pointer"},onClick:$},[h.value!=""?(s(),o("span",re,r(h.value),1)):(s(),o("span",ue,r(v.$t("main.home.label.path_placeholder")),1))]),e("div",{id:"select-folder",class:"folder",style:{cursor:"pointer"},onClick:f[0]||(f[0]=x=>{$(),w(K)()})},f[4]||(f[4]=[e("i",{class:"bi bi-folder"},null,-1)]))]),e("div",de,[e("div",ce,r(v.$t("main.home.label.name")),1),e("div",pe,[C(e("input",{type:"text","onUpdate:modelValue":f[1]||(f[1]=x=>u.value=x),placeholder:"project_name",style:{width:"100%"}},null,512),[[L,u.value]])])]),e("div",ve,[f[5]||(f[5]=e("div",{class:"flex-grow-1"},null,-1)),e("div",{class:"btn-grey hover-grey",onClick:f[2]||(f[2]=x=>g("cancel"))},r(v.$t("main.home.label.cancel")),1),e("div",{id:"confirm-create",class:F(["ms-2",d.value?"btn-blue":"btn-grey text-dim"]),onClick:f[3]||(f[3]=x=>{g("create",{path:h.value,name:u.value}),w(K)()})},r(v.$t("main.home.label.create")),3)])]))}}),ge=R(me,[["__scopeId","data-v-9d2b8ee6"]]),he={class:"create-option d-flex"},be={class:"flex-grow-1"},fe={class:"create-title m-0"},ye={class:"create-explanation"},_e={class:"create-option d-flex"},$e={class:"flex-grow-1"},ke={class:"create-title m-0"},we={class:"create-explanation"},xe=D({__name:"Options",emits:["create","import"],setup(E,{emit:i}){const y=T(),g=i;function h(d){d&&g("import",d)}function u(){y.showModal(A.FOLDERSELECTION,{callback:h,mode:"import"})}return(d,c)=>(s(),o(O,null,[e("div",he,[e("div",be,[e("h6",fe,r(d.$t("main.home.projects.create")),1),e("span",ye,r(d.$t("main.home.projects.create_details")),1)]),e("div",{id:"create-project",class:"create-btn highlight",onClick:c[0]||(c[0]=$=>{g("create"),w(K)()})},r(d.$t("main.home.projects.create_button")),1)]),e("div",_e,[e("div",$e,[e("h6",ke,r(d.$t("main.home.projects.import")),1),e("span",we,r(d.$t("main.home.projects.import_details")),1)]),e("div",{class:"create-btn",onClick:u},r(d.$t("main.home.projects.import_button")),1)])],64))}}),Pe=R(xe,[["__scopeId","data-v-45a6c858"]]),Ce="/assets/duck-S9Uqeb_r.svg",J="ArrowUpArrowUpArrowDownArrowDownArrowLeftArrowRightArrowLeftArrowRightba",Le={__name:"Egg",setup(E){let i="",y=_(-1100),g="";return window.addEventListener("keydown",async function(h){i+=h.key,J.slice(0,i.length)!==i&&(i=""),i.length===J.length&&(i===J&&(g="",y.value=-50,setTimeout(()=>{g="active",y.value=-100},1500)),i="")}),(h,u)=>(s(),o("div",{id:"duck-container",style:X({right:w(y).toString()+"vh"}),class:F(w(g))},u[0]||(u[0]=[e("img",{alt:"Duck",class:"logo",src:Ce,style:{height:"100vh"}},null,-1)]),6))}},Se=R(Le,[["__scopeId","data-v-0f098a42"]]),Ee={style:{"font-size":"20px"},class:"mb-1"},Ie={key:0,class:"d-flex"},Fe={key:2,style:{position:"relative",top:"7px"},class:"spinner-border spinner-border-sm text-primary ms-1",role:"status"},Me={class:"visually-hidden"},Ue={key:1,class:"d-flex"},Oe={key:2,style:{position:"relative",top:"7px"},class:"spinner-border spinner-border-sm text-primary ms-1",role:"status"},Ve={class:"visually-hidden"},je={key:2,class:"d-flex"},Ae={key:2,style:{position:"relative",top:"7px"},class:"spinner-border spinner-border-sm text-primary ms-1",role:"status"},De={class:"visually-hidden"},Te={key:3,class:"text-warning"},Re=D({__name:"PluginForm",emits:["cancel"],setup(E,{expose:i,emit:y}){const g=T(),h=y;i({setPanopticMl:p});const u=_("github"),d=_(""),c=_(""),$=_(""),v=_(""),f=_(!1),x=k(()=>g.serverState.plugins.map(l=>l.name)),B=k(()=>!(v.value==""||x.value.includes(v.value))),P=k(()=>u.value=="github"&&d.value.length>0||u.value=="local"&&c.value.length>0||u.value=="pip"),M=k(()=>P.value&&B.value),H=k(()=>$.value!=="panopticml"||u.value!=="pip"),q=k(()=>P.value&&x.value.includes(v.value)?"main.home.plugins.error_name_not_unique":P.value?"main.home.plugins.require_unique_name":u.value=="github"?"main.home.plugins.require_url":"main.home.plugins.require_folder");function W(l){if(!l)return;c.value=l;let t=l.split("/"),b=t[t.length-1]||t[t.length-2];b&&(v.value=b)}function G(){g.showModal(A.FOLDERSELECTION,{callback:W})}function a(){if(u.value=="github"&&v.value==""){const l=d.value.split("/"),t=l[l.length-1],b=t.endsWith(".git")?t.slice(0,-4):t;v.value=b}}async function n(){f.value=!0,await z();const l={name:v.value,source:"",type:I.LOCAL};u.value=="github"&&(l.source=d.value,l.type=I.GIT),u.value=="local"&&(l.source=c.value,l.type=I.LOCAL),u.value=="pip"&&(l.source=$.value,l.type=I.PIP),await g.addPlugin(l),f.value=!1,h("cancel")}function p(){u.value=I.PIP,$.value="panopticml",v.value="PanopticML"}return(l,t)=>(s(),o("div",null,[e("div",Ee,[e("i",{class:F(["bi bi-github rounded bbb me-1",u.value=="github"?"selected":""]),onClick:t[0]||(t[0]=b=>u.value="github")},null,2),e("i",{class:F(["bi bi-boxes rounded bbb me-1",u.value=="pip"?"selected":""]),onClick:t[1]||(t[1]=b=>u.value="pip")},null,2),e("i",{class:F(["bi bi-folder rounded bbb me-1",u.value=="local"?"selected":""]),onClick:t[2]||(t[2]=b=>u.value="local")},null,2)]),u.value=="github"?(s(),o("div",Ie,[t[10]||(t[10]=e("i",{class:"bi bi-github me-2 ms-1",style:{"font-size":"19px"}},null,-1)),C(e("input",{type:"url","onUpdate:modelValue":t[3]||(t[3]=b=>d.value=b),placeholder:"Enter git url",style:{width:"250px"}},null,512),[[L,d.value]]),P.value?C((s(),o("input",{key:0,"onUpdate:modelValue":t[4]||(t[4]=b=>v.value=b),type:"text",placeholder:"plugin unique name",style:{width:"150px"},class:"ms-2",onFocus:a},null,544)),[[L,v.value]]):m("",!0),M.value?(s(),o("div",{key:1,class:"bbb ms-2",onClick:n},r(l.$t("main.home.plugins.install")),1)):m("",!0),f.value?(s(),o("div",Fe,[e("span",Me,r(l.$t("main.home.plugins.load")),1)])):m("",!0)])):m("",!0),u.value=="local"?(s(),o("div",Ue,[e("div",{class:"bbb pe-2 me-2",style:{"white-space":"nowrap"},onClick:G},t[11]||(t[11]=[e("i",{class:"bi bi-folder me-2 ms-1"},null,-1),S("Select")])),C(e("input",{type:"url","onUpdate:modelValue":t[5]||(t[5]=b=>c.value=b),placeholder:"Folder path",style:{width:"180px"}},null,512),[[L,c.value]]),P.value?C((s(),o("input",{key:0,"onUpdate:modelValue":t[6]||(t[6]=b=>v.value=b),type:"text",placeholder:"plugin unique name",style:{width:"150px"},class:"ms-2"},null,512)),[[L,v.value]]):m("",!0),M.value?(s(),o("div",{key:1,class:"bbb ms-2",onClick:n},r(l.$t("main.home.plugins.install")),1)):m("",!0),f.value?(s(),o("div",Oe,[e("span",Ve,r(l.$t("main.home.plugins.load")),1)])):m("",!0)])):m("",!0),u.value=="pip"?(s(),o("div",je,[t[12]||(t[12]=e("i",{class:"bi bi-boxes me-2 ms-1",style:{"font-size":"19px"}},null,-1)),C(e("input",{type:"url","onUpdate:modelValue":t[7]||(t[7]=b=>$.value=b),placeholder:"Enter name of the python package",style:{width:"250px"}},null,512),[[L,$.value]]),P.value?C((s(),o("input",{key:0,"onUpdate:modelValue":t[8]||(t[8]=b=>v.value=b),type:"text",placeholder:"plugin unique name",style:{width:"150px"},class:"ms-2",onFocus:a},null,544)),[[L,v.value]]):m("",!0),M.value?(s(),o("div",{key:1,class:"bbb ms-2",onClick:n},r(l.$t("main.home.plugins.install")),1)):m("",!0),f.value?(s(),o("div",Ae,[e("span",De,r(l.$t("main.home.plugins.load")),1)])):m("",!0)])):m("",!0),e("div",{class:F(["mt-2 mb-2",q.value.includes(".error")?"text-danger":""])},r(l.$t(q.value)),3),H.value?(s(),o("div",Te,r(l.$t("main.home.plugins.warning")),1)):m("",!0),e("div",null,[e("div",{class:"bbb mt-2 text-center",style:{width:"70px"},onClick:t[9]||(t[9]=b=>h("cancel"))},"Cancel")])]))}}),qe=R(Re,[["__scopeId","data-v-ff97fcc7"]]),Ne={class:"bb"},ze={class:"p-2"},Be={key:0,class:"bi bi-arrow-clockwise me-1"},He={key:1,class:"spinner-border spinner-border-sm text-primary",role:"status",style:{"margin-right":"5px"}},We={key:2,class:"bi bi-check2 text-success me-1"},Ge={key:3},Je={key:4},Ke={style:{"max-width":"200px","word-break":"break-all"}},Qe={key:0},Xe={class:"text-secondary"},Ye={key:1},Ze={class:"text-secondary"},et=D({__name:"PluginOptionsDropdown",props:{plugin:{}},setup(E){const i=T(),y=E,g=_(!1),h=_(!1);async function u(){g.value=!0,h.value=!1,await z();try{let d=await i.updatePlugin(y.plugin.name);h.value=d}catch{}g.value=!1}return(d,c)=>(s(),V(Q,null,{button:j(()=>[e("div",null,[e("span",Ne,[S(r(y.plugin.name)+" ",1),c[1]||(c[1]=e("i",{class:"bi bi-three-dots-vertical"},null,-1))])])]),popup:j(()=>[e("div",ze,[e("div",{class:"bb",onClick:c[0]||(c[0]=$=>w(i).delPlugin(y.plugin.name))},[c[2]||(c[2]=e("i",{class:"bi bi-trash me-1"},null,-1)),S(" "+r(d.$t("plugin.remove")),1)]),e("div",{class:"bb",onClick:u},[!g.value&&!h.value?(s(),o("i",Be)):m("",!0),g.value&&!h.value?(s(),o("div",He,c[3]||(c[3]=[e("span",{class:"visually-hidden"},"Loading...",-1)]))):m("",!0),h.value?(s(),o("i",We)):m("",!0),y.plugin.source?(s(),o("span",Ge,r(d.$t("plugin.update")),1)):(s(),o("span",Je,r(d.$t("plugin.update_local")),1))]),c[6]||(c[6]=e("div",{class:"custom-hr mt-1 mb-1"},null,-1)),e("div",Ke,[d.plugin.path?(s(),o("div",Qe,[e("span",null,r(d.$t("plugin.path")),1),c[4]||(c[4]=e("br",null,null,-1)),e("span",Xe,r(d.plugin.path),1)])):m("",!0),d.plugin.source?(s(),o("div",Ye,[e("span",null,r(d.$t("plugin.source")),1),c[5]||(c[5]=e("br",null,null,-1)),e("span",Ze,r(d.plugin.type)+" "+r(d.plugin.source),1)])):m("",!0)])])]),_:1}))}}),tt={key:0},st={class:"window2 d-flex"},lt={key:0,class:"project-menu"},nt={class:"d-flex"},ot=["onClick"],it={class:"m-0"},at={class:"m-0 p-0 text-wrap text-break dimmed-2",style:{"font-size":"13px"}},rt={class:"project-option flex-shrink-0"},ut={class:"text-start p-1"},dt=["onClick"],ct={class:"mt-1"},pt=["checked","onChange"],vt={class:"flex-grow-1"},mt={class:"d-flex flex-column main-menu justify-content-center"},gt={class:"icon"},ht={class:"d-flex justify-content-center gap-1"},bt={class:"dimmed-2 mt-1"},ft={class:"lang"},yt=["value"],_t={id:"main-menu",class:"create-menu mt-5 pt-5"},$t={class:"mt-5 plugin-preview"},kt={class:"text-center"},wt={key:0,class:"text-center"},xt={class:"flex-grow-1 plugin-preview",style:{"overflow-y":"auto"}},Pt={key:1},Ct={style:{display:"inline-block"}},Lt=D({__name:"HomeView",setup(E){const i=T(),y=_(0),g=_(!1),h=_(null),u=_(!0),d=["fr","en"],c=k(()=>Array.isArray(i.serverState.projects)&&i.serverState.projects.length>0),$=k(()=>!c.value),v=k(()=>!c.value&&i.openModalId!==A.FIRSTMODAL),f=k(()=>i.serverState.plugins.some(a=>a.type==I.PIP&&a.source=="panopticml")),x=k(()=>{const a={},n=i.serverState.projects,p=i.serverState.plugins;return n.forEach(l=>{a[l.id]={},p.forEach(t=>a[l.id][t.name]=!0),l.ignoredPlugins.forEach(t=>a[l.id][t]=!1)}),a});function B(a){return a.replaceAll("-","‑")}function P(a){a.path&&a.name&&i.createProject(a.path,a.name)}function M(a){i.importProject(a)}async function H(){g.value=!0,await z(),h.value.setPanopticMl()}async function q(){u.value=!1,await z(),u.value=!0}async function W(a,n,p){console.log(a.id,n,p),!p&&!a.ignoredPlugins.includes(n)?a.ignoredPlugins.push(n):p&&a.ignoredPlugins.includes(n)&&(a.ignoredPlugins=a.ignoredPlugins.filter(l=>l!==n)),console.log(a.ignoredPlugins),await i.updateProject(a)}async function G(){try{const a=await i.getPackagesInfo(),n=JSON.stringify(a,null,2),p=new Blob([n],{type:"application/json"}),l=URL.createObjectURL(p),t=document.createElement("a");t.href=l,t.download="panoptic_infos.json",t.click(),URL.revokeObjectURL(l)}catch(a){console.error("Erreur lors de la récupération ou du téléchargement des données :",a)}}return Y(()=>{i.isProjectLoaded&&Z.push("/view"),$.value&&i.showModal(A.FIRSTMODAL)}),(a,n)=>u.value?(s(),o("div",tt,[U(Se),v.value?(s(),V(le,{key:0})):m("",!0),e("div",st,[c.value?(s(),o("div",lt,[(s(!0),o(O,null,N(w(i).serverState.projects,p=>(s(),o("div",nt,[e("div",{class:"project flex-grow-1 overflow-hidden",onClick:l=>w(i).loadProject(p.id)},[e("h5",it,r(p.name),1),e("div",at,r(B(p.path)),1)],8,ot),e("div",rt,[U(Q,null,{button:j(()=>n[5]||(n[5]=[e("div",{style:{position:"relative",top:"10px"}},[e("i",{class:"bb bi bi-three-dots-vertical"})],-1)])),popup:j(({hide:l})=>[e("div",ut,[e("div",{onClick:t=>{w(i).deleteProject(p.id)},class:"bb"},n[6]||(n[6]=[e("i",{class:"bi bi-trash me-1"},null,-1),S("delete ")]),8,dt),n[7]||(n[7]=e("div",{style:{"border-top":"1px solid var(--border-color)",width:"100%"},class:"mt-1"},null,-1)),(s(!0),o(O,null,N(w(i).serverState.plugins,t=>(s(),o("div",ct,[e("input",{type:"checkbox",class:"me-1",checked:x.value[p.id][t.name],onChange:b=>W(p,t.name,b.target.checked)},null,40,pt),S(r(t.name),1)]))),256))])]),_:2},1024)])]))),256))])):m("",!0),e("div",vt,[e("div",mt,[e("div",null,[e("div",gt,[U(ee)]),n[9]||(n[9]=e("h1",{class:"m-0 p-0"},"Panoptic",-1)),e("div",ht,[e("h6",bt,"Version "+r(w(i).serverState.version),1),U(te,{message:"main.home.version_tooltip"},{default:j(()=>[e("i",{class:"bb bi-bug",style:{"margin-right":"0.5rem"},onClick:G})]),_:1})]),e("div",ft,[n[8]||(n[8]=e("i",{class:"bi bi-translate",style:{"margin-right":"0.5rem"}},null,-1)),C(e("select",{"onUpdate:modelValue":n[0]||(n[0]=p=>a.$i18n.locale=p),onChange:q},[(s(),o(O,null,N(d,(p,l)=>e("option",{key:`Lang${l}`,value:p},r(p.toUpperCase()),9,yt)),64))],544),[[se,a.$i18n.locale]])])]),e("div",_t,[y.value==0?(s(),V(Pe,{key:0,onCreate:n[1]||(n[1]=p=>y.value=1),onImport:M})):m("",!0),y.value==1?(s(),V(ge,{key:1,onCancel:n[2]||(n[2]=p=>y.value=0),onCreate:P})):m("",!0)]),e("div",$t,[e("h5",kt,[n[10]||(n[10]=S(" Plugins ")),e("span",{class:"sb bi bi-plus",style:{position:"relative",top:"1px"},onClick:n[3]||(n[3]=p=>g.value=!0)})]),f.value?m("",!0):(s(),o("div",wt,[e("span",{class:"bb ms-1 me-1",onClick:H},[n[11]||(n[11]=e("i",{class:"bi bi-lightbulb"},null,-1)),S(" "+r(a.$t("main.home.plugins.install_panoptic_ml")),1)])]))]),e("div",xt,[g.value?(s(),V(qe,{key:0,onCancel:n[4]||(n[4]=p=>g.value=!1),ref_key:"pluginFormElem",ref:h},null,512)):(s(),o("div",Pt,[(s(!0),o(O,null,N(w(i).serverState.plugins,p=>(s(),o("div",Ct,[U(et,{plugin:p},null,8,["plugin"])]))),256))]))])])])])])):m("",!0)}}),It=R(Lt,[["__scopeId","data-v-38189b2a"]]);export{It as default};
