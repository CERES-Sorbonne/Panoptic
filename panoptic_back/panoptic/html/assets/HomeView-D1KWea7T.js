import{d as V,u as A,r as y,c as $,a as o,b as e,t as u,e as _,g as J,w as C,v as P,n as j,M as O,o as s,_ as D,F as I,f as X,h as v,i as L,j as z,P as T,k as F,l as U,D as K,m as Y,p as Z,q as S,s as q,x as ee,y as te,z as se}from"./index-BfsQ_WTL.js";import{_ as le}from"./Tutorial-e77Ou4NG.js";const ne={class:""},oe={class:"mb-3"},ie={class:"d-flex text-start input mb-2"},ae={class:"info"},ue={key:0},re={key:1,class:"text-placeholder"},de={class:"d-flex text-start input"},ce={class:"info"},pe={class:"flex-grow-1 value text-dim"},me={class:"d-flex mt-2"},ve=V({__name:"Create",emits:["cancel","create"],setup(E,{emit:n}){const f=A(),h=n,g=y(""),a=y(""),r=$(()=>g.value!=""&&a.value!="");function c(m){m&&(g.value=m)}function k(){f.showModal(O.FOLDERSELECTION,{callback:c,mode:"create"})}return(m,b)=>(s(),o("div",ne,[e("h3",oe,u(m.$t("main.home.create_title")),1),e("div",ie,[e("div",ae,u(m.$t("main.home.label.folder")),1),e("div",{class:"flex-grow-1 value text-dim",style:{cursor:"pointer"},onClick:k},[g.value!=""?(s(),o("span",ue,u(g.value),1)):(s(),o("span",re,u(m.$t("main.home.label.path_placeholder")),1))]),e("div",{id:"select-folder",class:"folder",style:{cursor:"pointer"},onClick:b[0]||(b[0]=w=>{k(),_(J)()})},b[4]||(b[4]=[e("i",{class:"bi bi-folder"},null,-1)]))]),e("div",de,[e("div",ce,u(m.$t("main.home.label.name")),1),e("div",pe,[C(e("input",{type:"text","onUpdate:modelValue":b[1]||(b[1]=w=>a.value=w),placeholder:"project_name",style:{width:"100%"}},null,512),[[P,a.value]])])]),e("div",me,[b[5]||(b[5]=e("div",{class:"flex-grow-1"},null,-1)),e("div",{class:"btn-grey hover-grey",onClick:b[2]||(b[2]=w=>h("cancel"))},u(m.$t("main.home.label.cancel")),1),e("div",{id:"confirm-create",class:j(["ms-2",r.value?"btn-blue":"btn-grey text-dim"]),onClick:b[3]||(b[3]=w=>{h("create",{path:g.value,name:a.value}),_(J)()})},u(m.$t("main.home.label.create")),3)])]))}}),he=D(ve,[["__scopeId","data-v-a138fd7d"]]),ge={class:"create-option d-flex"},be={class:"flex-grow-1"},fe={class:"create-title m-0"},ye={class:"create-explanation"},_e={class:"create-option d-flex"},$e={class:"flex-grow-1"},ke={class:"create-title m-0"},we={class:"create-explanation"},xe=V({__name:"Options",emits:["create","import"],setup(E,{emit:n}){const f=A(),h=n;function g(r){r&&h("import",r)}function a(){f.showModal(O.FOLDERSELECTION,{callback:g,mode:"import"})}return(r,c)=>(s(),o(I,null,[e("div",ge,[e("div",be,[e("h6",fe,u(r.$t("main.home.projects.create")),1),e("span",ye,u(r.$t("main.home.projects.create_details")),1)]),e("div",{id:"create-project",class:"create-btn highlight",onClick:c[0]||(c[0]=k=>{h("create"),_(J)()})},u(r.$t("main.home.projects.create_button")),1)]),e("div",_e,[e("div",$e,[e("h6",ke,u(r.$t("main.home.projects.import")),1),e("span",we,u(r.$t("main.home.projects.import_details")),1)]),e("div",{class:"create-btn",onClick:a},u(r.$t("main.home.projects.import_button")),1)])],64))}}),Ce=D(xe,[["__scopeId","data-v-dc4965fd"]]),Pe="/assets/duck-S9Uqeb_r.svg",G="ArrowUpArrowUpArrowDownArrowDownArrowLeftArrowRightArrowLeftArrowRightba",Le={__name:"Egg",setup(E){let n="",f=y(-1100),h="";return window.addEventListener("keydown",async function(g){n+=g.key,G.slice(0,n.length)!==n&&(n=""),n.length===G.length&&(n===G&&(h="",f.value=-50,setTimeout(()=>{h="active",f.value=-100},1500)),n="")}),(g,a)=>(s(),o("div",{id:"duck-container",style:X({right:_(f).toString()+"vh"}),class:j(_(h))},a[0]||(a[0]=[e("img",{alt:"Duck",class:"logo",src:Pe,style:{height:"100vh"}},null,-1)]),6))}},Ee=D(Le,[["__scopeId","data-v-a82a2918"]]),je={style:{"font-size":"20px"},class:"mb-1"},Me={key:0,class:"d-flex"},Se={key:2,style:{position:"relative",top:"7px"},class:"spinner-border spinner-border-sm text-primary ms-1",role:"status"},Ie={class:"visually-hidden"},Fe={key:1,class:"d-flex"},Ue={key:2,style:{position:"relative",top:"7px"},class:"spinner-border spinner-border-sm text-primary ms-1",role:"status"},Oe={class:"visually-hidden"},Ve={key:2,class:"d-flex"},Ae={key:2,style:{position:"relative",top:"7px"},class:"spinner-border spinner-border-sm text-primary ms-1",role:"status"},De={class:"visually-hidden"},Ne={key:3,class:"text-warning"},Re=V({__name:"PluginForm",emits:["cancel"],setup(E,{expose:n,emit:f}){const h=A(),g=f;n({setPanopticMl:i});const a=y("github"),r=y(""),c=y(""),k=y(""),m=y(""),b=y(!1),w=$(()=>h.data.plugins.map(t=>t.name)),B=$(()=>!(m.value==""||w.value.includes(m.value))),x=$(()=>a.value=="github"&&r.value.length>0||a.value=="local"&&c.value.length>0||a.value=="pip"),M=$(()=>x.value&&B.value),N=$(()=>x.value&&w.value.includes(m.value)?"main.home.plugins.error_name_not_unique":x.value?"main.home.plugins.require_unique_name":a.value=="github"?"main.home.plugins.require_url":"main.home.plugins.require_folder");function H(t){if(!t)return;c.value=t;let l=t.split("/"),p=l[l.length-1]||l[l.length-2];p&&(m.value=p)}function W(){h.showModal(O.FOLDERSELECTION,{callback:H})}function R(){if(a.value=="github"&&m.value==""){const t=r.value.split("/"),l=t[t.length-1],p=l.endsWith(".git")?l.slice(0,-4):l;m.value=p}}async function d(){b.value=!0,await z();const t={name:m.value,source:"",type:T.LOCAL};a.value=="github"&&(t.source=r.value,t.type=T.GIT),a.value=="local"&&(t.source=c.value,t.type=T.LOCAL),a.value=="pip"&&(t.source=k.value,t.type=T.PIP),await h.addPlugin(t),b.value=!1,g("cancel")}function i(){a.value="github",r.value="https://github.com/CERES-Sorbonne/PanopticML",m.value="PanopticML"}return(t,l)=>(s(),o("div",null,[e("div",je,[e("i",{class:j(["bi bi-github rounded bbb me-1",a.value=="github"?"selected":""]),onClick:l[0]||(l[0]=p=>a.value="github")},null,2),e("i",{class:j(["bi bi-boxes rounded bbb me-1",a.value=="pip"?"selected":""]),onClick:l[1]||(l[1]=p=>a.value="pip")},null,2),e("i",{class:j(["bi bi-folder rounded bbb me-1",a.value=="local"?"selected":""]),onClick:l[2]||(l[2]=p=>a.value="local")},null,2)]),a.value=="github"?(s(),o("div",Me,[l[10]||(l[10]=e("i",{class:"bi bi-github me-2 ms-1",style:{"font-size":"19px"}},null,-1)),C(e("input",{type:"url","onUpdate:modelValue":l[3]||(l[3]=p=>r.value=p),placeholder:"Enter git url",style:{width:"250px"}},null,512),[[P,r.value]]),x.value?C((s(),o("input",{key:0,"onUpdate:modelValue":l[4]||(l[4]=p=>m.value=p),type:"text",placeholder:"plugin unique name",style:{width:"150px"},class:"ms-2",onFocus:R},null,544)),[[P,m.value]]):v("",!0),M.value?(s(),o("div",{key:1,class:"bbb ms-2",onClick:d},u(t.$t("main.home.plugins.install")),1)):v("",!0),b.value?(s(),o("div",Se,[e("span",Ie,u(t.$t("main.home.plugins.load")),1)])):v("",!0)])):v("",!0),a.value=="local"?(s(),o("div",Fe,[e("div",{class:"bbb pe-2 me-2",style:{"white-space":"nowrap"},onClick:W},l[11]||(l[11]=[e("i",{class:"bi bi-folder me-2 ms-1"},null,-1),L("Select")])),C(e("input",{type:"url","onUpdate:modelValue":l[5]||(l[5]=p=>c.value=p),placeholder:"Folder path",style:{width:"180px"}},null,512),[[P,c.value]]),x.value?C((s(),o("input",{key:0,"onUpdate:modelValue":l[6]||(l[6]=p=>m.value=p),type:"text",placeholder:"plugin unique name",style:{width:"150px"},class:"ms-2"},null,512)),[[P,m.value]]):v("",!0),M.value?(s(),o("div",{key:1,class:"bbb ms-2",onClick:d},u(t.$t("main.home.plugins.install")),1)):v("",!0),b.value?(s(),o("div",Ue,[e("span",Oe,u(t.$t("main.home.plugins.load")),1)])):v("",!0)])):v("",!0),a.value=="pip"?(s(),o("div",Ve,[l[12]||(l[12]=e("i",{class:"bi bi-boxes me-2 ms-1",style:{"font-size":"19px"}},null,-1)),C(e("input",{type:"url","onUpdate:modelValue":l[7]||(l[7]=p=>k.value=p),placeholder:"Enter name of the python package",style:{width:"250px"}},null,512),[[P,k.value]]),x.value?C((s(),o("input",{key:0,"onUpdate:modelValue":l[8]||(l[8]=p=>m.value=p),type:"text",placeholder:"plugin unique name",style:{width:"150px"},class:"ms-2",onFocus:R},null,544)),[[P,m.value]]):v("",!0),M.value?(s(),o("div",{key:1,class:"bbb ms-2",onClick:d},u(t.$t("main.home.plugins.install")),1)):v("",!0),b.value?(s(),o("div",Ae,[e("span",De,u(t.$t("main.home.plugins.load")),1)])):v("",!0)])):v("",!0),e("div",{class:j(["mt-2 mb-2",N.value.includes(".error")?"text-danger":""])},u(t.$t(N.value)),3),a.value!="github"||a.value=="github"&&!r.value.includes("github.com/CERES-Sorbonne")?(s(),o("div",Ne,u(t.$t("main.home.plugins.warning")),1)):v("",!0),e("div",null,[e("div",{class:"bbb mt-2 text-center",style:{width:"70px"},onClick:l[9]||(l[9]=p=>g("cancel"))},"Cancel")])]))}}),Te=D(Re,[["__scopeId","data-v-627e55dd"]]),qe={class:"bb"},ze={class:"p-2"},Be={key:0,class:"bi bi-arrow-clockwise me-1"},He={key:1,class:"spinner-border spinner-border-sm text-primary",role:"status",style:{"margin-right":"5px"}},We={key:2,class:"bi bi-check2 text-success me-1"},Ge={key:3},Je={key:4},Ke={style:{"max-width":"200px","word-break":"break-all"}},Qe={key:0},Xe={class:"text-secondary"},Ye={key:1},Ze={class:"text-secondary"},et=V({__name:"PluginOptionsDropdown",props:{plugin:{}},setup(E){const n=A(),f=E,h=y(!1),g=y(!1);async function a(){h.value=!0,g.value=!1,await z();try{let r=await n.updatePlugin(f.plugin.name);g.value=r}catch{}h.value=!1}return(r,c)=>(s(),F(K,null,{button:U(()=>[e("div",null,[e("span",qe,[L(u(f.plugin.name)+" ",1),c[1]||(c[1]=e("i",{class:"bi bi-three-dots-vertical"},null,-1))])])]),popup:U(()=>[e("div",ze,[e("div",{class:"bb",onClick:c[0]||(c[0]=k=>_(n).delPlugin(f.plugin.name))},[c[2]||(c[2]=e("i",{class:"bi bi-trash me-1"},null,-1)),L(" "+u(r.$t("plugin.remove")),1)]),e("div",{class:"bb",onClick:a},[!h.value&&!g.value?(s(),o("i",Be)):v("",!0),h.value&&!g.value?(s(),o("div",He,c[3]||(c[3]=[e("span",{class:"visually-hidden"},"Loading...",-1)]))):v("",!0),g.value?(s(),o("i",We)):v("",!0),f.plugin.source?(s(),o("span",Ge,u(r.$t("plugin.update")),1)):(s(),o("span",Je,u(r.$t("plugin.update_local")),1))]),c[6]||(c[6]=e("div",{class:"custom-hr mt-1 mb-1"},null,-1)),e("div",Ke,[r.plugin.path?(s(),o("div",Qe,[e("span",null,u(r.$t("plugin.path")),1),c[4]||(c[4]=e("br",null,null,-1)),e("span",Xe,u(r.plugin.path),1)])):v("",!0),r.plugin.source?(s(),o("div",Ye,[e("span",null,u(r.$t("plugin.source")),1),c[5]||(c[5]=e("br",null,null,-1)),e("span",Ze,u(r.plugin.type)+" "+u(r.plugin.source),1)])):v("",!0)])])]),_:1}))}}),tt={key:0},st={class:"window2 d-flex"},lt={key:0,class:"project-menu"},nt={class:"d-flex"},ot=["onClick"],it={class:"m-0"},at={class:"m-0 p-0 text-wrap text-break dimmed-2",style:{"font-size":"13px"}},ut={class:"project-option flex-shrink-0"},rt={class:"text-start p-1"},dt=["onClick"],ct={class:"mt-1"},pt=["checked","onChange"],mt={key:1,class:"flex-grow-1"},vt={class:"d-flex flex-column main-menu justify-content-center"},ht={class:"icon"},gt={class:"d-flex justify-content-center gap-1"},bt={class:"dimmed-2 mt-1"},ft={class:"lang"},yt=["value"],_t={id:"main-menu",class:"create-menu mt-5 pt-5"},$t={class:"mt-5 plugin-preview"},kt={class:"text-center"},wt={key:0,class:"text-center"},xt={class:"flex-grow-1 plugin-preview",style:{"overflow-y":"auto"}},Ct={key:1},Pt={style:{display:"inline-block"}},Lt={key:2,class:"text-center mt-5 w-100"},Et=V({__name:"HomeView",setup(E){const n=A(),f=y(0),h=y(!1),g=y(null),a=y(!0),r=["fr","en"],c=$(()=>Array.isArray(n.data.status.projects)&&n.data.status.projects.length>0),k=$(()=>!c.value&&n.data.init),m=$(()=>!c.value&&n.data.init&&n.openModalId!==O.FIRSTMODAL),b=$(()=>n.data.plugins.some(d=>d.source&&d.source.includes("https://github.com/CERES-Sorbonne/PanopticML"))),w=$(()=>{const d={};return n.data.status.projects.forEach(i=>{d[i.path]={},n.data.plugins.forEach(t=>d[i.path][t.name]=!0),n.data.status.ignoredPlugins[i.path]&&n.data.status.ignoredPlugins[i.path].forEach(t=>{d[i.path][t]=!1})}),d});function B(d){return d.replaceAll("-","‑")}function x(d){d.path&&d.name&&n.createProject(d.path,d.name)}function M(d){n.importProject(d)}async function N(){h.value=!0,await z(),g.value.setPanopticMl()}async function H(){a.value=!1,await z(),a.value=!0}async function W(d,i,t){await n.updateIgnorePlugin(d,i,!t)}async function R(){try{const d=await n.getPackagesInfo(),i=JSON.stringify(d,null,2),t=new Blob([i],{type:"application/json"}),l=URL.createObjectURL(t),p=document.createElement("a");p.href=l,p.download="panoptic_infos.json",p.click(),URL.revokeObjectURL(l)}catch(d){console.error("Erreur lors de la récupération ou du téléchargement des données :",d)}}return Y(()=>{n.isProjectLoaded&&Z.push("/view"),k.value&&n.showModal(O.FIRSTMODAL)}),(d,i)=>a.value?(s(),o("div",tt,[S(Ee),m.value?(s(),F(le,{key:0})):v("",!0),e("div",st,[c.value?(s(),o("div",lt,[(s(!0),o(I,null,q(_(n).data.status.projects,t=>(s(),o("div",nt,[e("div",{class:"project flex-grow-1 overflow-hidden",onClick:l=>_(n).loadProject(t.path)},[e("h5",it,u(t.name),1),e("div",at,u(B(t.path)),1)],8,ot),e("div",ut,[S(K,null,{button:U(()=>i[5]||(i[5]=[e("div",{style:{position:"relative",top:"10px"}},[e("i",{class:"bb bi bi-three-dots-vertical"})],-1)])),popup:U(({hide:l})=>[e("div",rt,[e("div",{onClick:p=>{_(n).deleteProject(t.path),l()},class:"bb"},i[6]||(i[6]=[e("i",{class:"bi bi-trash me-1"},null,-1),L("delete ")]),8,dt),i[7]||(i[7]=e("div",{style:{"border-top":"1px solid var(--border-color)",width:"100%"},class:"mt-1"},null,-1)),(s(!0),o(I,null,q(_(n).data.plugins,p=>(s(),o("div",ct,[e("input",{type:"checkbox",class:"me-1",checked:w.value[t.path][p.name],onChange:Q=>W(t.path,p.name,Q.target.checked)},null,40,pt),L(u(p.name),1)]))),256))])]),_:2},1024)])]))),256))])):v("",!0),_(n).data.init?(s(),o("div",mt,[e("div",vt,[e("div",null,[e("div",ht,[S(ee)]),i[9]||(i[9]=e("h1",{class:"m-0 p-0"},"Panoptic",-1)),e("div",gt,[e("h6",bt,"Version "+u(_(n).data.version),1),S(te,{message:"main.home.version_tooltip"},{default:U(()=>[e("i",{class:"bb bi-bug",style:{"margin-right":"0.5rem"},onClick:R})]),_:1})]),e("div",ft,[i[8]||(i[8]=e("i",{class:"bi bi-translate",style:{"margin-right":"0.5rem"}},null,-1)),C(e("select",{"onUpdate:modelValue":i[0]||(i[0]=t=>d.$i18n.locale=t),onChange:H},[(s(),o(I,null,q(r,(t,l)=>e("option",{key:`Lang${l}`,value:t},u(t.toUpperCase()),9,yt)),64))],544),[[se,d.$i18n.locale]])])]),e("div",_t,[f.value==0?(s(),F(Ce,{key:0,onCreate:i[1]||(i[1]=t=>f.value=1),onImport:M})):v("",!0),f.value==1?(s(),F(he,{key:1,onCancel:i[2]||(i[2]=t=>f.value=0),onCreate:x})):v("",!0)]),e("div",$t,[e("h5",kt,[i[10]||(i[10]=L(" Plugins ")),e("span",{class:"sb bi bi-plus",style:{position:"relative",top:"1px"},onClick:i[3]||(i[3]=t=>h.value=!0)})]),b.value?v("",!0):(s(),o("div",wt,[e("span",{class:"bb ms-1 me-1",onClick:N},[i[11]||(i[11]=e("i",{class:"bi bi-lightbulb"},null,-1)),L(" "+u(d.$t("main.home.plugins.install_panoptic_ml")),1)])]))]),e("div",xt,[h.value?(s(),F(Te,{key:0,onCancel:i[4]||(i[4]=t=>h.value=!1),ref_key:"pluginFormElem",ref:g},null,512)):(s(),o("div",Ct,[(s(!0),o(I,null,q(_(n).data.plugins,t=>(s(),o("div",Pt,[S(et,{plugin:t},null,8,["plugin"])]))),256))]))])])])):(s(),o("div",Lt,i[12]||(i[12]=[e("p",null,"Waiting for Server...",-1)])))])])):v("",!0)}}),St=D(Et,[["__scopeId","data-v-51e84595"]]);export{St as default};
