import{d as V,u as A,r as y,c as $,a as i,b as e,t as r,e as k,g as K,w as x,v as C,n as I,M as T,o as l,_ as D,F as j,f as Y,P as E,h as m,i as L,j as z,k as F,l as O,D as Q,m as Z,p as ee,q as U,s as N,x as te,y as se,z as le}from"./index-C_O3vVlq.js";import{_ as ne}from"./Tutorial.vue_vue_type_style_index_0_lang-BYhjw9Dm.js";const oe={class:""},ie={class:"mb-3"},ae={class:"d-flex text-start input mb-2"},re={class:"info"},ue={key:0},de={key:1,class:"text-placeholder"},ce={class:"d-flex text-start input"},pe={class:"info"},ve={class:"flex-grow-1 value text-dim"},me={class:"d-flex mt-2"},ge=V({__name:"Create",emits:["cancel","create"],setup(S,{emit:n}){const f=A(),g=n,h=y(""),u=y(""),c=$(()=>h.value!=""&&u.value!="");function p(v){v&&(h.value=v)}function _(){f.showModal(T.FOLDERSELECTION,{callback:p,mode:"create"})}return(v,b)=>(l(),i("div",oe,[e("h3",ie,r(v.$t("main.home.create_title")),1),e("div",ae,[e("div",re,r(v.$t("main.home.label.folder")),1),e("div",{class:"flex-grow-1 value text-dim",style:{cursor:"pointer"},onClick:_},[h.value!=""?(l(),i("span",ue,r(h.value),1)):(l(),i("span",de,r(v.$t("main.home.label.path_placeholder")),1))]),e("div",{id:"select-folder",class:"folder",style:{cursor:"pointer"},onClick:b[0]||(b[0]=w=>{_(),k(K)()})},b[4]||(b[4]=[e("i",{class:"bi bi-folder"},null,-1)]))]),e("div",ce,[e("div",pe,r(v.$t("main.home.label.name")),1),e("div",ve,[x(e("input",{type:"text","onUpdate:modelValue":b[1]||(b[1]=w=>u.value=w),placeholder:"project_name",style:{width:"100%"}},null,512),[[C,u.value]])])]),e("div",me,[b[5]||(b[5]=e("div",{class:"flex-grow-1"},null,-1)),e("div",{class:"btn-grey hover-grey",onClick:b[2]||(b[2]=w=>g("cancel"))},r(v.$t("main.home.label.cancel")),1),e("div",{id:"confirm-create",class:I(["ms-2",c.value?"btn-blue":"btn-grey text-dim"]),onClick:b[3]||(b[3]=w=>{g("create",{path:h.value,name:u.value}),k(K)()})},r(v.$t("main.home.label.create")),3)])]))}}),he=D(ge,[["__scopeId","data-v-a138fd7d"]]),be={class:"create-option d-flex"},fe={class:"flex-grow-1"},ye={class:"create-title m-0"},_e={class:"create-explanation"},$e={class:"create-option d-flex"},ke={class:"flex-grow-1"},we={class:"create-title m-0"},Pe={class:"create-explanation"},xe=V({__name:"Options",emits:["create","import"],setup(S,{emit:n}){const f=A(),g=n;function h(c){c&&g("import",c)}function u(){f.showModal(T.FOLDERSELECTION,{callback:h,mode:"import"})}return(c,p)=>(l(),i(j,null,[e("div",be,[e("div",fe,[e("h6",ye,r(c.$t("main.home.projects.create")),1),e("span",_e,r(c.$t("main.home.projects.create_details")),1)]),e("div",{id:"create-project",class:"create-btn highlight",onClick:p[0]||(p[0]=_=>{g("create"),k(K)()})},r(c.$t("main.home.projects.create_button")),1)]),e("div",$e,[e("div",ke,[e("h6",we,r(c.$t("main.home.projects.import")),1),e("span",Pe,r(c.$t("main.home.projects.import_details")),1)]),e("div",{class:"create-btn",onClick:u},r(c.$t("main.home.projects.import_button")),1)])],64))}}),Ce=D(xe,[["__scopeId","data-v-dc4965fd"]]),Le="/assets/duck-S9Uqeb_r.svg",J="ArrowUpArrowUpArrowDownArrowDownArrowLeftArrowRightArrowLeftArrowRightba",Se={__name:"Egg",setup(S){let n="",f=y(-1100),g="";return window.addEventListener("keydown",async function(h){n+=h.key,J.slice(0,n.length)!==n&&(n=""),n.length===J.length&&(n===J&&(g="",f.value=-50,setTimeout(()=>{g="active",f.value=-100},1500)),n="")}),(h,u)=>(l(),i("div",{id:"duck-container",style:Y({right:k(f).toString()+"vh"}),class:I(k(g))},u[0]||(u[0]=[e("img",{alt:"Duck",class:"logo",src:Le,style:{height:"100vh"}},null,-1)]),6))}},Ee=D(Se,[["__scopeId","data-v-a82a2918"]]),Ie={style:{"font-size":"20px"},class:"mb-1"},Me={key:0,class:"d-flex"},Ue={key:2,style:{position:"relative",top:"7px"},class:"spinner-border spinner-border-sm text-primary ms-1",role:"status"},je={class:"visually-hidden"},Fe={key:1,class:"d-flex"},Oe={key:2,style:{position:"relative",top:"7px"},class:"spinner-border spinner-border-sm text-primary ms-1",role:"status"},Te={class:"visually-hidden"},Ve={key:2,class:"d-flex"},Ae={key:2,style:{position:"relative",top:"7px"},class:"spinner-border spinner-border-sm text-primary ms-1",role:"status"},De={class:"visually-hidden"},Re={key:3,class:"text-warning"},qe=V({__name:"PluginForm",emits:["cancel"],setup(S,{expose:n,emit:f}){const g=A(),h=f;n({setPanopticMl:a});const u=y("github"),c=y(""),p=y(""),_=y(""),v=y(""),b=y(!1),w=$(()=>g.serverState.plugins.map(t=>t.name)),B=$(()=>!(v.value==""||w.value.includes(v.value))),P=$(()=>u.value=="github"&&c.value.length>0||u.value=="local"&&p.value.length>0||u.value=="pip"),M=$(()=>P.value&&B.value),H=$(()=>_.value!=="panopticml"||u.value!=="pip"),R=$(()=>P.value&&w.value.includes(v.value)?"main.home.plugins.error_name_not_unique":P.value?"main.home.plugins.require_unique_name":u.value=="github"?"main.home.plugins.require_url":"main.home.plugins.require_folder");function W(t){if(!t)return;p.value=t;let s=t.split("/"),d=s[s.length-1]||s[s.length-2];d&&(v.value=d)}function G(){g.showModal(T.FOLDERSELECTION,{callback:W})}function q(){if(u.value=="github"&&v.value==""){const t=c.value.split("/"),s=t[t.length-1],d=s.endsWith(".git")?s.slice(0,-4):s;v.value=d}}async function o(){b.value=!0,await z();const t={name:v.value,source:"",type:E.LOCAL};u.value=="github"&&(t.source=c.value,t.type=E.GIT),u.value=="local"&&(t.source=p.value,t.type=E.LOCAL),u.value=="pip"&&(t.source=_.value,t.type=E.PIP),await g.addPlugin(t),b.value=!1,h("cancel")}function a(){u.value=E.PIP,_.value="panopticml",v.value="PanopticML"}return(t,s)=>(l(),i("div",null,[e("div",Ie,[e("i",{class:I(["bi bi-github rounded bbb me-1",u.value=="github"?"selected":""]),onClick:s[0]||(s[0]=d=>u.value="github")},null,2),e("i",{class:I(["bi bi-boxes rounded bbb me-1",u.value=="pip"?"selected":""]),onClick:s[1]||(s[1]=d=>u.value="pip")},null,2),e("i",{class:I(["bi bi-folder rounded bbb me-1",u.value=="local"?"selected":""]),onClick:s[2]||(s[2]=d=>u.value="local")},null,2)]),u.value=="github"?(l(),i("div",Me,[s[10]||(s[10]=e("i",{class:"bi bi-github me-2 ms-1",style:{"font-size":"19px"}},null,-1)),x(e("input",{type:"url","onUpdate:modelValue":s[3]||(s[3]=d=>c.value=d),placeholder:"Enter git url",style:{width:"250px"}},null,512),[[C,c.value]]),P.value?x((l(),i("input",{key:0,"onUpdate:modelValue":s[4]||(s[4]=d=>v.value=d),type:"text",placeholder:"plugin unique name",style:{width:"150px"},class:"ms-2",onFocus:q},null,544)),[[C,v.value]]):m("",!0),M.value?(l(),i("div",{key:1,class:"bbb ms-2",onClick:o},r(t.$t("main.home.plugins.install")),1)):m("",!0),b.value?(l(),i("div",Ue,[e("span",je,r(t.$t("main.home.plugins.load")),1)])):m("",!0)])):m("",!0),u.value=="local"?(l(),i("div",Fe,[e("div",{class:"bbb pe-2 me-2",style:{"white-space":"nowrap"},onClick:G},s[11]||(s[11]=[e("i",{class:"bi bi-folder me-2 ms-1"},null,-1),L("Select")])),x(e("input",{type:"url","onUpdate:modelValue":s[5]||(s[5]=d=>p.value=d),placeholder:"Folder path",style:{width:"180px"}},null,512),[[C,p.value]]),P.value?x((l(),i("input",{key:0,"onUpdate:modelValue":s[6]||(s[6]=d=>v.value=d),type:"text",placeholder:"plugin unique name",style:{width:"150px"},class:"ms-2"},null,512)),[[C,v.value]]):m("",!0),M.value?(l(),i("div",{key:1,class:"bbb ms-2",onClick:o},r(t.$t("main.home.plugins.install")),1)):m("",!0),b.value?(l(),i("div",Oe,[e("span",Te,r(t.$t("main.home.plugins.load")),1)])):m("",!0)])):m("",!0),u.value=="pip"?(l(),i("div",Ve,[s[12]||(s[12]=e("i",{class:"bi bi-boxes me-2 ms-1",style:{"font-size":"19px"}},null,-1)),x(e("input",{type:"url","onUpdate:modelValue":s[7]||(s[7]=d=>_.value=d),placeholder:"Enter name of the python package",style:{width:"250px"}},null,512),[[C,_.value]]),P.value?x((l(),i("input",{key:0,"onUpdate:modelValue":s[8]||(s[8]=d=>v.value=d),type:"text",placeholder:"plugin unique name",style:{width:"150px"},class:"ms-2",onFocus:q},null,544)),[[C,v.value]]):m("",!0),M.value?(l(),i("div",{key:1,class:"bbb ms-2",onClick:o},r(t.$t("main.home.plugins.install")),1)):m("",!0),b.value?(l(),i("div",Ae,[e("span",De,r(t.$t("main.home.plugins.load")),1)])):m("",!0)])):m("",!0),e("div",{class:I(["mt-2 mb-2",R.value.includes(".error")?"text-danger":""])},r(t.$t(R.value)),3),H.value?(l(),i("div",Re,r(t.$t("main.home.plugins.warning")),1)):m("",!0),e("div",null,[e("div",{class:"bbb mt-2 text-center",style:{width:"70px"},onClick:s[9]||(s[9]=d=>h("cancel"))},"Cancel")])]))}}),Ne=D(qe,[["__scopeId","data-v-20e815d7"]]),ze={class:"bb"},Be={class:"p-2"},He={key:0,class:"bi bi-arrow-clockwise me-1"},We={key:1,class:"spinner-border spinner-border-sm text-primary",role:"status",style:{"margin-right":"5px"}},Ge={key:2,class:"bi bi-check2 text-success me-1"},Je={key:3},Ke={key:4},Qe={style:{"max-width":"200px","word-break":"break-all"}},Xe={key:0},Ye={class:"text-secondary"},Ze={key:1},et={class:"text-secondary"},tt=V({__name:"PluginOptionsDropdown",props:{plugin:{}},setup(S){const n=A(),f=S,g=y(!1),h=y(!1);async function u(){g.value=!0,h.value=!1,await z();try{let c=await n.updatePlugin(f.plugin.name);h.value=c}catch{}g.value=!1}return(c,p)=>(l(),F(Q,null,{button:O(()=>[e("div",null,[e("span",ze,[L(r(f.plugin.name)+" ",1),p[1]||(p[1]=e("i",{class:"bi bi-three-dots-vertical"},null,-1))])])]),popup:O(()=>[e("div",Be,[e("div",{class:"bb",onClick:p[0]||(p[0]=_=>k(n).delPlugin(f.plugin.name))},[p[2]||(p[2]=e("i",{class:"bi bi-trash me-1"},null,-1)),L(" "+r(c.$t("plugin.remove")),1)]),e("div",{class:"bb",onClick:u},[!g.value&&!h.value?(l(),i("i",He)):m("",!0),g.value&&!h.value?(l(),i("div",We,p[3]||(p[3]=[e("span",{class:"visually-hidden"},"Loading...",-1)]))):m("",!0),h.value?(l(),i("i",Ge)):m("",!0),f.plugin.source?(l(),i("span",Je,r(c.$t("plugin.update")),1)):(l(),i("span",Ke,r(c.$t("plugin.update_local")),1))]),p[6]||(p[6]=e("div",{class:"custom-hr mt-1 mb-1"},null,-1)),e("div",Qe,[c.plugin.path?(l(),i("div",Xe,[e("span",null,r(c.$t("plugin.path")),1),p[4]||(p[4]=e("br",null,null,-1)),e("span",Ye,r(c.plugin.path),1)])):m("",!0),c.plugin.source?(l(),i("div",Ze,[e("span",null,r(c.$t("plugin.source")),1),p[5]||(p[5]=e("br",null,null,-1)),e("span",et,r(c.plugin.type)+" "+r(c.plugin.source),1)])):m("",!0)])])]),_:1}))}}),st={key:0},lt={class:"window2 d-flex"},nt={key:0,class:"project-menu"},ot={class:"d-flex"},it=["onClick"],at={class:"m-0"},rt={class:"m-0 p-0 text-wrap text-break dimmed-2",style:{"font-size":"13px"}},ut={class:"project-option flex-shrink-0"},dt={class:"text-start p-1"},ct=["onClick"],pt={class:"mt-1"},vt=["checked","onChange"],mt={class:"flex-grow-1"},gt={class:"d-flex flex-column main-menu justify-content-center"},ht={class:"icon"},bt={class:"d-flex justify-content-center gap-1"},ft={class:"dimmed-2 mt-1"},yt={class:"lang"},_t=["value"],$t={id:"main-menu",class:"create-menu mt-5 pt-5"},kt={class:"mt-5 plugin-preview"},wt={class:"text-center"},Pt={key:0,class:"text-center"},xt={class:"flex-grow-1 plugin-preview",style:{"overflow-y":"auto"}},Ct={key:1},Lt={style:{display:"inline-block"}},St=V({__name:"HomeView",setup(S){const n=A(),f=y(0),g=y(!1),h=y(null),u=y(!0),c=["fr","en"],p=$(()=>Array.isArray(n.serverState.projects)&&n.serverState.projects.length>0),_=$(()=>!p.value),v=$(()=>!p.value&&n.openModalId!==T.FIRSTMODAL),b=$(()=>n.serverState.plugins.some(o=>o.type==E.PIP&&o.source=="panopticml")),w=$(()=>{const o={},a=n.serverState.projects,t=n.serverState.plugins;return a.forEach(s=>{o[s.id]={},t.forEach(d=>o[s.id][d.name]=!0),s.ignoredPlugins.forEach(d=>o[s.id][d]=!1)}),o});function B(o){return o.replaceAll("-","‑")}function P(o){o.path&&o.name&&n.createProject(o.path,o.name)}function M(o){n.importProject(o)}async function H(){g.value=!0,await z(),h.value.setPanopticMl()}async function R(){u.value=!1,await z(),u.value=!0}async function W(o,a,t){console.log(o.id,a,t),!t&&!o.ignoredPlugins.includes(a)?o.ignoredPlugins.push(a):t&&o.ignoredPlugins.includes(a)&&(o.ignoredPlugins=o.ignoredPlugins.filter(s=>s!==a)),console.log(o.ignoredPlugins),await n.updateProject(o)}async function G(){try{const o=await n.getPackagesInfo(),a=JSON.stringify(o,null,2),t=new Blob([a],{type:"application/json"}),s=URL.createObjectURL(t),d=document.createElement("a");d.href=s,d.download="panoptic_infos.json",d.click(),URL.revokeObjectURL(s)}catch(o){console.error("Erreur lors de la récupération ou du téléchargement des données :",o)}}Z(()=>{n.isProjectLoaded&&ee.push("/view"),_.value&&n.showModal(T.FIRSTMODAL)});function q(){n.createProject("/Users/david/panoptic-projects","test-"+Math.floor(performance.now()/1e3))}return(o,a)=>u.value?(l(),i("div",st,[U(Ee),v.value?(l(),F(ne,{key:0})):m("",!0),e("div",lt,[p.value?(l(),i("div",nt,[(l(!0),i(j,null,N(k(n).serverState.projects,t=>(l(),i("div",ot,[e("div",{class:"project flex-grow-1 overflow-hidden",onClick:s=>k(n).loadProject(t.id)},[e("h5",at,r(t.name),1),e("div",rt,r(B(t.path)),1)],8,it),e("div",ut,[U(Q,null,{button:O(()=>a[5]||(a[5]=[e("div",{style:{position:"relative",top:"10px"}},[e("i",{class:"bb bi bi-three-dots-vertical"})],-1)])),popup:O(({hide:s})=>[e("div",dt,[e("div",{onClick:d=>{k(n).deleteProject(t.id)},class:"bb"},a[6]||(a[6]=[e("i",{class:"bi bi-trash me-1"},null,-1),L("delete ")]),8,ct),a[7]||(a[7]=e("div",{style:{"border-top":"1px solid var(--border-color)",width:"100%"},class:"mt-1"},null,-1)),(l(!0),i(j,null,N(k(n).serverState.plugins,d=>(l(),i("div",pt,[e("input",{type:"checkbox",class:"me-1",checked:w.value[t.id][d.name],onChange:X=>W(t,d.name,X.target.checked)},null,40,vt),L(r(d.name),1)]))),256))])]),_:2},1024)])]))),256))])):m("",!0),e("div",mt,[e("div",gt,[e("div",null,[e("div",ht,[U(te)]),a[9]||(a[9]=e("h1",{class:"m-0 p-0"},"Panoptic",-1)),e("div",bt,[e("h6",ft,"Version "+r(k(n).serverState.version),1),U(se,{message:"main.home.version_tooltip"},{default:O(()=>[e("i",{class:"bb bi-bug",style:{"margin-right":"0.5rem"},onClick:G})]),_:1})]),e("div",yt,[a[8]||(a[8]=e("i",{class:"bi bi-translate",style:{"margin-right":"0.5rem"}},null,-1)),x(e("select",{"onUpdate:modelValue":a[0]||(a[0]=t=>o.$i18n.locale=t),onChange:R},[(l(),i(j,null,N(c,(t,s)=>e("option",{key:`Lang${s}`,value:t},r(t.toUpperCase()),9,_t)),64))],544),[[le,o.$i18n.locale]])])]),e("div",{class:"bb",onClick:q},"Test-Project"),e("div",$t,[f.value==0?(l(),F(Ce,{key:0,onCreate:a[1]||(a[1]=t=>f.value=1),onImport:M})):m("",!0),f.value==1?(l(),F(he,{key:1,onCancel:a[2]||(a[2]=t=>f.value=0),onCreate:P})):m("",!0)]),e("div",kt,[e("h5",wt,[a[10]||(a[10]=L(" Plugins ")),e("span",{class:"sb bi bi-plus",style:{position:"relative",top:"1px"},onClick:a[3]||(a[3]=t=>g.value=!0)})]),b.value?m("",!0):(l(),i("div",Pt,[e("span",{class:"bb ms-1 me-1",onClick:H},[a[11]||(a[11]=e("i",{class:"bi bi-lightbulb"},null,-1)),L(" "+r(o.$t("main.home.plugins.install_panoptic_ml")),1)])]))]),e("div",xt,[g.value?(l(),F(Ne,{key:0,onCancel:a[4]||(a[4]=t=>g.value=!1),ref_key:"pluginFormElem",ref:h},null,512)):(l(),i("div",Ct,[(l(!0),i(j,null,N(k(n).serverState.plugins,t=>(l(),i("div",Lt,[U(tt,{plugin:t},null,8,["plugin"])]))),256))]))])])])])])):m("",!0)}}),Mt=D(St,[["__scopeId","data-v-a29916ea"]]);export{Mt as default};
